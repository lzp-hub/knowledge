# ç±»å‹ç³»ç»Ÿä¸ç±»å‹æ£€æŸ¥

## ğŸ“š ç›®å½•

- [JavaScript åŠ¨æ€ç±»å‹](#javascriptåŠ¨æ€ç±»å‹)
- [TypeScript é™æ€ç±»å‹](#typescripté™æ€ç±»å‹)
- [ç±»å‹æ¨æ–­](#ç±»å‹æ¨æ–­)
- [ç±»å‹å®ˆå«](#ç±»å‹å®ˆå«)
- [æ³›å‹](#æ³›å‹)
- [æ¥å£ä¸ç±»å‹åˆ«å](#æ¥å£ä¸ç±»å‹åˆ«å)
- [è”åˆç±»å‹ä¸äº¤å‰ç±»å‹](#è”åˆç±»å‹ä¸äº¤å‰ç±»å‹)
- [å·¥å…·ç±»å‹](#å·¥å…·ç±»å‹)
- [å®é™…åº”ç”¨åœºæ™¯](#å®é™…åº”ç”¨åœºæ™¯)
- [é¢è¯•å¸¸è€ƒé—®é¢˜](#é¢è¯•å¸¸è€ƒé—®é¢˜)

---

## JavaScript åŠ¨æ€ç±»å‹

### ğŸ“ åŠ¨æ€ç±»å‹ç‰¹ç‚¹

| ç‰¹æ€§           | è¯´æ˜           | ç¤ºä¾‹                     | é—®é¢˜       |
| -------------- | -------------- | ------------------------ | ---------- |
| **è¿è¡Œæ—¶ç±»å‹** | è¿è¡Œæ—¶ç¡®å®šç±»å‹ | `let x = 1; x = "hello"` | ç±»å‹é”™è¯¯   |
| **éšå¼è½¬æ¢**   | è‡ªåŠ¨ç±»å‹è½¬æ¢   | `1 + "2"`                | æ„å¤–ç»“æœ   |
| **ç±»å‹æ£€æŸ¥**   | è¿è¡Œæ—¶æ£€æŸ¥     | `obj.method()`           | è¿è¡Œæ—¶é”™è¯¯ |
| **çµæ´»æ€§**     | ç±»å‹çµæ´»       | åŠ¨æ€å±æ€§                 | ç»´æŠ¤å›°éš¾   |

### ğŸ”§ è¯¦ç»†è¯´æ˜

**åŠ¨æ€ç±»å‹é—®é¢˜**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šJavaScript çš„åŠ¨æ€ç±»å‹è™½ç„¶çµæ´»ï¼Œä½†å®¹æ˜“äº§ç”Ÿç±»å‹é”™è¯¯ï¼Œéœ€è¦è¿è¡Œæ—¶æ‰èƒ½å‘ç°ã€‚

```javascript
// åŠ¨æ€ç±»å‹é—®é¢˜ç¤ºä¾‹
function calculateTotal(price, quantity) {
  return price * quantity;
}

// è¿è¡Œæ—¶æ‰å‘ç°é”™è¯¯
console.log(calculateTotal("10", "5")); // "105" (å­—ç¬¦ä¸²æ‹¼æ¥)
console.log(calculateTotal(10, 5)); // 50 (æ­£ç¡®)

// å¯¹è±¡å±æ€§è®¿é—®é”™è¯¯
const user = {
  name: "å¼ ä¸‰",
  age: 25,
};

// è¿è¡Œæ—¶æ‰å‘ç°å±æ€§ä¸å­˜åœ¨
console.log(user.nam); // undefined (æ‹¼å†™é”™è¯¯)
console.log(user.name); // "å¼ ä¸‰" (æ­£ç¡®)

// æ–¹æ³•è°ƒç”¨é”™è¯¯
const obj = {
  value: 42,
};

// è¿è¡Œæ—¶æ‰å‘ç°æ–¹æ³•ä¸å­˜åœ¨
obj.getValue(); // TypeError: obj.getValue is not a function
```

---

## TypeScript é™æ€ç±»å‹

### ğŸ“ TypeScript ç‰¹æ€§

| ç‰¹æ€§         | è¯­æ³•       | ç¤ºä¾‹                | ç”¨é€”     |
| ------------ | ---------- | ------------------- | -------- |
| **ç±»å‹æ³¨è§£** | `: type`   | `let x: number = 1` | ç±»å‹å£°æ˜ |
| **ç±»å‹æ£€æŸ¥** | ç¼–è¯‘æ—¶æ£€æŸ¥ | `tsc`               | é”™è¯¯æ£€æµ‹ |
| **ç±»å‹æ¨æ–­** | è‡ªåŠ¨æ¨æ–­   | `let x = 1`         | è‡ªåŠ¨ç±»å‹ |
| **ç±»å‹å…¼å®¹** | ç»“æ„åŒ–ç±»å‹ | `interface`         | ç±»å‹å…¼å®¹ |

### ğŸ”§ è¯¦ç»†è¯´æ˜

**TypeScript åŸºç¡€ç±»å‹**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šTypeScript æä¾›äº†é™æ€ç±»å‹ç³»ç»Ÿï¼Œåœ¨ç¼–è¯‘æ—¶å°±èƒ½å‘ç°ç±»å‹é”™è¯¯ï¼Œæé«˜ä»£ç è´¨é‡ã€‚

```typescript
// åŸºç¡€ç±»å‹
let name: string = "å¼ ä¸‰";
let age: number = 25;
let isActive: boolean = true;
let items: string[] = ["apple", "banana"];
let user: { name: string; age: number } = { name: "å¼ ä¸‰", age: 25 };

// å‡½æ•°ç±»å‹
function greet(name: string): string {
  return `Hello, ${name}!`;
}

// å¯é€‰å‚æ•°
function createUser(name: string, age?: number): User {
  return { name, age: age || 0 };
}

// é»˜è®¤å‚æ•°
function calculateTotal(price: number, tax: number = 0.1): number {
  return price * (1 + tax);
}

// å®é™…åº”ç”¨ï¼šAPIæ¥å£
interface ApiResponse<T> {
  data: T;
  status: number;
  message: string;
}

async function fetchUser(id: number): Promise<ApiResponse<User>> {
  const response = await fetch(`/api/users/${id}`);
  return response.json();
}
```

---

## ç±»å‹æ¨æ–­

### ğŸ“ ç±»å‹æ¨æ–­è§„åˆ™

| è§„åˆ™             | è¯´æ˜         | ç¤ºä¾‹                  | ç»“æœ                   |
| ---------------- | ------------ | --------------------- | ---------------------- |
| **å­—é¢é‡æ¨æ–­**   | ä»å­—é¢é‡æ¨æ–­ | `let x = 1`           | `number`               |
| **ä¸Šä¸‹æ–‡æ¨æ–­**   | ä»ä¸Šä¸‹æ–‡æ¨æ–­ | `arr.map(x => x + 1)` | `number`               |
| **æœ€ä½³å…¬å…±ç±»å‹** | è”åˆç±»å‹æ¨æ–­ | `[1, "hello"]`        | `(string \| number)[]` |
| **ç±»å‹æ–­è¨€**     | æ‰‹åŠ¨æŒ‡å®šç±»å‹ | `value as string`     | `string`               |

### ğŸ”§ è¯¦ç»†è¯´æ˜

**ç±»å‹æ¨æ–­ - è‡ªåŠ¨ç±»å‹**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šTypeScript èƒ½å¤Ÿè‡ªåŠ¨æ¨æ–­ç±»å‹ï¼Œå‡å°‘ç±»å‹æ³¨è§£ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚

```typescript
// åŸºç¡€ç±»å‹æ¨æ–­
let x = 1; // æ¨æ–­ä¸º number
let y = "hello"; // æ¨æ–­ä¸º string
let z = true; // æ¨æ–­ä¸º boolean

// æ•°ç»„ç±»å‹æ¨æ–­
let numbers = [1, 2, 3]; // æ¨æ–­ä¸º number[]
let mixed = [1, "hello", true]; // æ¨æ–­ä¸º (string | number | boolean)[]

// å‡½æ•°ç±»å‹æ¨æ–­
function add(a: number, b: number) {
  return a + b; // æ¨æ–­è¿”å›ç±»å‹ä¸º number
}

// å¯¹è±¡ç±»å‹æ¨æ–­
const user = {
  name: "å¼ ä¸‰",
  age: 25,
  isActive: true,
}; // æ¨æ–­ä¸º {name: string, age: number, isActive: boolean}

// å®é™…åº”ç”¨ï¼šæ³›å‹æ¨æ–­
function identity<T>(value: T): T {
  return value;
}

const result = identity("hello"); // æ¨æ–­ä¸º string
const number = identity(42); // æ¨æ–­ä¸º number
```

---

## ç±»å‹å®ˆå«

### ğŸ“ ç±»å‹å®ˆå«ç±»å‹

| ç±»å‹           | è¯­æ³•                     | ç¤ºä¾‹                    | ç”¨é€”           |
| -------------- | ------------------------ | ----------------------- | -------------- |
| **typeof**     | `typeof value`           | `typeof x === "string"` | åŸºç¡€ç±»å‹æ£€æŸ¥   |
| **instanceof** | `value instanceof Class` | `obj instanceof Date`   | å®ä¾‹ç±»å‹æ£€æŸ¥   |
| **in æ“ä½œç¬¦**  | `"prop" in obj`          | `"name" in user`        | å±æ€§å­˜åœ¨æ£€æŸ¥   |
| **è‡ªå®šä¹‰å®ˆå«** | `function isType()`      | `isString(value)`       | è‡ªå®šä¹‰ç±»å‹æ£€æŸ¥ |

### ğŸ”§ è¯¦ç»†è¯´æ˜

**ç±»å‹å®ˆå« - ç±»å‹æ”¶çª„**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šç±»å‹å®ˆå«èƒ½å¤Ÿæ”¶çª„ç±»å‹èŒƒå›´ï¼Œè®© TypeScript æ›´å‡†ç¡®åœ°æ¨æ–­ç±»å‹ã€‚

```typescript
// typeofç±»å‹å®ˆå«
function processValue(value: string | number) {
  if (typeof value === "string") {
    // è¿™é‡Œvalueè¢«æ”¶çª„ä¸ºstringç±»å‹
    return value.toUpperCase();
  } else {
    // è¿™é‡Œvalueè¢«æ”¶çª„ä¸ºnumberç±»å‹
    return value * 2;
  }
}

// instanceofç±»å‹å®ˆå«
function formatDate(date: Date | string) {
  if (date instanceof Date) {
    // è¿™é‡Œdateè¢«æ”¶çª„ä¸ºDateç±»å‹
    return date.toLocaleDateString();
  } else {
    // è¿™é‡Œdateè¢«æ”¶çª„ä¸ºstringç±»å‹
    return new Date(date).toLocaleDateString();
  }
}

// inæ“ä½œç¬¦ç±»å‹å®ˆå«
interface Bird {
  fly(): void;
  layEggs(): void;
}

interface Fish {
  swim(): void;
  layEggs(): void;
}

function move(animal: Bird | Fish) {
  if ("fly" in animal) {
    // è¿™é‡Œanimalè¢«æ”¶çª„ä¸ºBirdç±»å‹
    animal.fly();
  } else {
    // è¿™é‡Œanimalè¢«æ”¶çª„ä¸ºFishç±»å‹
    animal.swim();
  }
}

// è‡ªå®šä¹‰ç±»å‹å®ˆå«
function isString(value: unknown): value is string {
  return typeof value === "string";
}

function processUnknown(value: unknown) {
  if (isString(value)) {
    // è¿™é‡Œvalueè¢«æ”¶çª„ä¸ºstringç±»å‹
    return value.toUpperCase();
  }
  return value;
}
```

---

## æ³›å‹

### ğŸ“ æ³›å‹ç‰¹æ€§

| ç‰¹æ€§         | è¯­æ³•            | ç¤ºä¾‹                         | ç”¨é€”       |
| ------------ | --------------- | ---------------------------- | ---------- |
| **æ³›å‹å‡½æ•°** | `function<T>()` | `function identity<T>(x: T)` | ç±»å‹å‚æ•°åŒ– |
| **æ³›å‹æ¥å£** | `interface<T>`  | `interface ApiResponse<T>`   | æ¥å£å‚æ•°åŒ– |
| **æ³›å‹ç±»**   | `class<T>`      | `class Container<T>`         | ç±»å‚æ•°åŒ–   |
| **æ³›å‹çº¦æŸ** | `T extends U`   | `T extends string`           | ç±»å‹çº¦æŸ   |

### ğŸ”§ è¯¦ç»†è¯´æ˜

**æ³›å‹ - ç±»å‹å‚æ•°åŒ–**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šæ³›å‹æä¾›äº†ç±»å‹å‚æ•°åŒ–ï¼Œè®©ä»£ç æ›´åŠ çµæ´»å’Œå¯å¤ç”¨ã€‚

```typescript
// æ³›å‹å‡½æ•°
function identity<T>(value: T): T {
  return value;
}

const stringResult = identity<string>("hello");
const numberResult = identity<number>(42);

// æ³›å‹æ¥å£
interface ApiResponse<T> {
  data: T;
  status: number;
  message: string;
}

interface User {
  id: number;
  name: string;
  email: string;
}

// ä½¿ç”¨æ³›å‹æ¥å£
const userResponse: ApiResponse<User> = {
  data: { id: 1, name: "å¼ ä¸‰", email: "zhangsan@example.com" },
  status: 200,
  message: "success",
};

// æ³›å‹ç±»
class Container<T> {
  private items: T[] = [];

  add(item: T): void {
    this.items.push(item);
  }

  get(index: number): T | undefined {
    return this.items[index];
  }

  getAll(): T[] {
    return [...this.items];
  }
}

// ä½¿ç”¨æ³›å‹ç±»
const stringContainer = new Container<string>();
stringContainer.add("hello");
stringContainer.add("world");

const numberContainer = new Container<number>();
numberContainer.add(1);
numberContainer.add(2);

// æ³›å‹çº¦æŸ
interface Lengthwise {
  length: number;
}

function logLength<T extends Lengthwise>(arg: T): T {
  console.log(arg.length);
  return arg;
}

logLength("hello"); // 5
logLength([1, 2, 3]); // 3
logLength({ length: 10 }); // 10
```

---

## æ¥å£ä¸ç±»å‹åˆ«å

### ğŸ“ æ¥å£ä¸ç±»å‹åˆ«åå¯¹æ¯”

| ç‰¹æ€§         | æ¥å£         | ç±»å‹åˆ«å | ç”¨é€”     |
| ------------ | ------------ | -------- | -------- |
| **å£°æ˜åˆå¹¶** | æ”¯æŒ         | ä¸æ”¯æŒ   | æ‰©å±•æ¥å£ |
| **ç»§æ‰¿**     | `extends`    | `&`      | ç±»å‹ç»§æ‰¿ |
| **å®ç°**     | `implements` | ä¸æ”¯æŒ   | ç±»å®ç°   |
| **è”åˆç±»å‹** | ä¸æ”¯æŒ       | æ”¯æŒ     | ç±»å‹è”åˆ |

### ğŸ”§ è¯¦ç»†è¯´æ˜

**æ¥å£ - å¯¹è±¡ç»“æ„**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šæ¥å£å®šä¹‰äº†å¯¹è±¡çš„ç»“æ„ï¼Œæä¾›äº†ç±»å‹æ£€æŸ¥å’Œä»£ç æç¤ºã€‚

```typescript
// åŸºç¡€æ¥å£
interface User {
  id: number;
  name: string;
  email: string;
  age?: number; // å¯é€‰å±æ€§
  readonly createdAt: Date; // åªè¯»å±æ€§
}

// æ¥å£ç»§æ‰¿
interface Admin extends User {
  permissions: string[];
  isActive: boolean;
}

// æ¥å£å®ç°
class UserService implements User {
  id: number;
  name: string;
  email: string;
  createdAt: Date;

  constructor(id: number, name: string, email: string) {
    this.id = id;
    this.name = name;
    this.email = email;
    this.createdAt = new Date();
  }
}

// æ¥å£å£°æ˜åˆå¹¶
interface User {
  phone?: string;
}

// ç°åœ¨Useræ¥å£åŒ…å«phoneå±æ€§
const user: User = {
  id: 1,
  name: "å¼ ä¸‰",
  email: "zhangsan@example.com",
  createdAt: new Date(),
  phone: "13800138000",
};

// å®é™…åº”ç”¨ï¼šAPIæ¥å£
interface ApiEndpoints {
  users: {
    GET: User[];
    POST: (user: Omit<User, "id" | "createdAt">) => User;
    PUT: (id: number, user: Partial<User>) => User;
    DELETE: (id: number) => void;
  };
}
```

**ç±»å‹åˆ«å - ç±»å‹å®šä¹‰**

```typescript
// åŸºç¡€ç±»å‹åˆ«å
type ID = string | number;
type Status = "pending" | "approved" | "rejected";

// å¯¹è±¡ç±»å‹åˆ«å
type User = {
  id: ID;
  name: string;
  email: string;
  status: Status;
};

// è”åˆç±»å‹åˆ«å
type StringOrNumber = string | number;
type EventHandler = (event: Event) => void;

// äº¤å‰ç±»å‹åˆ«å
type AdminUser = User & {
  permissions: string[];
  isActive: boolean;
};

// å®é™…åº”ç”¨ï¼šå·¥å…·ç±»å‹
type Partial<T> = {
  [P in keyof T]?: T[P];
};

type Required<T> = {
  [P in keyof T]-?: T[P];
};

type Pick<T, K extends keyof T> = {
  [P in K]: T[P];
};

type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;
```

---

## è”åˆç±»å‹ä¸äº¤å‰ç±»å‹

### ğŸ“ è”åˆç±»å‹ä¸äº¤å‰ç±»å‹

| ç±»å‹           | è¯­æ³•         | ç¤ºä¾‹                   | ç”¨é€”       |
| -------------- | ------------ | ---------------------- | ---------- |
| **è”åˆç±»å‹**   | `A \| B`     | `string \| number`     | ç±»å‹é€‰æ‹©   |
| **äº¤å‰ç±»å‹**   | `A & B`      | `User & Admin`         | ç±»å‹åˆå¹¶   |
| **å­—é¢é‡ç±»å‹** | `"a" \| "b"` | `"success" \| "error"` | å…·ä½“å€¼     |
| **never ç±»å‹** | `never`      | å‡½æ•°æ°¸ä¸è¿”å›           | ä¸å¯èƒ½ç±»å‹ |

### ğŸ”§ è¯¦ç»†è¯´æ˜

**è”åˆç±»å‹ - ç±»å‹é€‰æ‹©**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè”åˆç±»å‹å…è®¸ä¸€ä¸ªå€¼å¯ä»¥æ˜¯å¤šç§ç±»å‹ä¸­çš„ä¸€ç§ï¼Œæä¾›äº†ç±»å‹çµæ´»æ€§ã€‚

```typescript
// åŸºç¡€è”åˆç±»å‹
type StringOrNumber = string | number;

function processValue(value: StringOrNumber) {
  if (typeof value === "string") {
    return value.toUpperCase();
  } else {
    return value * 2;
  }
}

// å­—é¢é‡è”åˆç±»å‹
type Status = "pending" | "approved" | "rejected";
type Theme = "light" | "dark";

function setStatus(status: Status) {
  console.log(`Status set to: ${status}`);
}

// å¯¹è±¡è”åˆç±»å‹
type Circle = {
  kind: "circle";
  radius: number;
};

type Rectangle = {
  kind: "rectangle";
  width: number;
  height: number;
};

type Shape = Circle | Rectangle;

function calculateArea(shape: Shape): number {
  switch (shape.kind) {
    case "circle":
      return Math.PI * shape.radius * shape.radius;
    case "rectangle":
      return shape.width * shape.height;
    default:
      // è¿™é‡Œshapeè¢«æ”¶çª„ä¸ºneverç±»å‹
      const _exhaustiveCheck: never = shape;
      return _exhaustiveCheck;
  }
}

// å®é™…åº”ç”¨ï¼šAPIå“åº”
type ApiResponse<T> =
  | { success: true; data: T }
  | { success: false; error: string };

function handleApiResponse<T>(response: ApiResponse<T>) {
  if (response.success) {
    // è¿™é‡Œresponseè¢«æ”¶çª„ä¸ºæˆåŠŸç±»å‹
    console.log("Data:", response.data);
  } else {
    // è¿™é‡Œresponseè¢«æ”¶çª„ä¸ºå¤±è´¥ç±»å‹
    console.error("Error:", response.error);
  }
}
```

**äº¤å‰ç±»å‹ - ç±»å‹åˆå¹¶**

```typescript
// åŸºç¡€äº¤å‰ç±»å‹
type User = {
  id: number;
  name: string;
  email: string;
};

type Admin = {
  permissions: string[];
  isActive: boolean;
};

type AdminUser = User & Admin;

// ä½¿ç”¨äº¤å‰ç±»å‹
const adminUser: AdminUser = {
  id: 1,
  name: "å¼ ä¸‰",
  email: "zhangsan@example.com",
  permissions: ["read", "write", "delete"],
  isActive: true,
};

// å®é™…åº”ç”¨ï¼šæ··å…¥æ¨¡å¼
type Timestamped = {
  createdAt: Date;
  updatedAt: Date;
};

type SoftDelete = {
  deletedAt: Date | null;
  isDeleted: boolean;
};

type BaseEntity = User & Timestamped & SoftDelete;

// å®é™…åº”ç”¨ï¼šå‡½æ•°é‡è½½
type EventHandler<T> = (event: T) => void;

type MouseEventHandler = EventHandler<MouseEvent>;
type KeyboardEventHandler = EventHandler<KeyboardEvent>;

type EventHandlers = MouseEventHandler & KeyboardEventHandler;
```

---

## å·¥å…·ç±»å‹

### ğŸ“ å†…ç½®å·¥å…·ç±»å‹

| ç±»å‹         | è¯­æ³•            | ç¤ºä¾‹                                | ç”¨é€”         |
| ------------ | --------------- | ----------------------------------- | ------------ |
| **Partial**  | `Partial<T>`    | `Partial<User>`                     | æ‰€æœ‰å±æ€§å¯é€‰ |
| **Required** | `Required<T>`   | `Required<User>`                    | æ‰€æœ‰å±æ€§å¿…éœ€ |
| **Pick**     | `Pick<T, K>`    | `Pick<User, "name">`                | é€‰æ‹©å±æ€§     |
| **Omit**     | `Omit<T, K>`    | `Omit<User, "id">`                  | æ’é™¤å±æ€§     |
| **Record**   | `Record<K, V>`  | `Record<string, number>`            | é”®å€¼å¯¹ç±»å‹   |
| **Exclude**  | `Exclude<T, U>` | `Exclude<string \| number, string>` | æ’é™¤ç±»å‹     |
| **Extract**  | `Extract<T, U>` | `Extract<string \| number, string>` | æå–ç±»å‹     |

### ğŸ”§ è¯¦ç»†è¯´æ˜

**å·¥å…·ç±»å‹ - ç±»å‹æ“ä½œ**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šå·¥å…·ç±»å‹æä¾›äº†ç±»å‹æ“ä½œèƒ½åŠ›ï¼Œè®©ç±»å‹ç³»ç»Ÿæ›´åŠ çµæ´»å’Œå¼ºå¤§ã€‚

```typescript
// åŸºç¡€å·¥å…·ç±»å‹
interface User {
  id: number;
  name: string;
  email: string;
  age: number;
  isActive: boolean;
}

// Partial - æ‰€æœ‰å±æ€§å¯é€‰
type PartialUser = Partial<User>;
// ç­‰ä»·äº { id?: number; name?: string; email?: string; age?: number; isActive?: boolean; }

// Required - æ‰€æœ‰å±æ€§å¿…éœ€
type RequiredUser = Required<PartialUser>;
// ç­‰ä»·äº User

// Pick - é€‰æ‹©å±æ€§
type UserBasicInfo = Pick<User, "name" | "email">;
// ç­‰ä»·äº { name: string; email: string; }

// Omit - æ’é™¤å±æ€§
type UserWithoutId = Omit<User, "id">;
// ç­‰ä»·äº { name: string; email: string; age: number; isActive: boolean; }

// Record - é”®å€¼å¯¹ç±»å‹
type UserRoles = Record<string, string[]>;
// ç­‰ä»·äº { [key: string]: string[]; }

// å®é™…åº”ç”¨ï¼šAPIç±»å‹
type CreateUserRequest = Omit<User, "id">;
type UpdateUserRequest = Partial<Omit<User, "id">>;
type UserResponse = Required<User>;

// å®é™…åº”ç”¨ï¼šè¡¨å•ç±»å‹
type UserForm = Pick<User, "name" | "email" | "age">;
type UserFormErrors = Record<keyof UserForm, string>;

// è‡ªå®šä¹‰å·¥å…·ç±»å‹
type DeepPartial<T> = {
  [P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : T[P];
};

type DeepRequired<T> = {
  [P in keyof T]-?: T[P] extends object ? DeepRequired<T[P]> : T[P];
};

// ä½¿ç”¨è‡ªå®šä¹‰å·¥å…·ç±»å‹
interface NestedUser {
  id: number;
  profile: {
    name: string;
    avatar: string;
  };
  settings: {
    theme: string;
    language: string;
  };
}

type PartialNestedUser = DeepPartial<NestedUser>;
type RequiredNestedUser = DeepRequired<PartialNestedUser>;
```

---

## å®é™…åº”ç”¨åœºæ™¯

### 1. React ç»„ä»¶ç±»å‹

**React ç»„ä»¶ç±»å‹å®šä¹‰**

```typescript
import React from "react";

// ç»„ä»¶Propsç±»å‹
interface ButtonProps {
  children: React.ReactNode;
  onClick: () => void;
  variant?: "primary" | "secondary" | "danger";
  size?: "small" | "medium" | "large";
  disabled?: boolean;
}

// å‡½æ•°ç»„ä»¶
const Button: React.FC<ButtonProps> = ({
  children,
  onClick,
  variant = "primary",
  size = "medium",
  disabled = false,
}) => {
  return (
    <button
      onClick={onClick}
      disabled={disabled}
      className={`btn btn-${variant} btn-${size}`}
    >
      {children}
    </button>
  );
};

// ç±»ç»„ä»¶
interface CounterState {
  count: number;
}

class Counter extends React.Component<{}, CounterState> {
  constructor(props: {}) {
    super(props);
    this.state = { count: 0 };
  }

  increment = () => {
    this.setState((prevState) => ({
      count: prevState.count + 1,
    }));
  };

  render() {
    return (
      <div>
        <p>Count: {this.state.count}</p>
        <Button onClick={this.increment}>Increment</Button>
      </div>
    );
  }
}
```

### 2. API ç±»å‹å®šä¹‰

**API æ¥å£ç±»å‹**

```typescript
// APIå“åº”ç±»å‹
interface ApiResponse<T> {
  data: T;
  status: number;
  message: string;
  timestamp: string;
}

// ç”¨æˆ·ç›¸å…³ç±»å‹
interface User {
  id: number;
  name: string;
  email: string;
  avatar?: string;
  createdAt: string;
  updatedAt: string;
}

interface CreateUserRequest {
  name: string;
  email: string;
  password: string;
}

interface UpdateUserRequest {
  name?: string;
  email?: string;
  avatar?: string;
}

// APIæœåŠ¡ç±»å‹
class UserService {
  async getUsers(): Promise<ApiResponse<User[]>> {
    const response = await fetch("/api/users");
    return response.json();
  }

  async getUser(id: number): Promise<ApiResponse<User>> {
    const response = await fetch(`/api/users/${id}`);
    return response.json();
  }

  async createUser(user: CreateUserRequest): Promise<ApiResponse<User>> {
    const response = await fetch("/api/users", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(user),
    });
    return response.json();
  }

  async updateUser(
    id: number,
    user: UpdateUserRequest
  ): Promise<ApiResponse<User>> {
    const response = await fetch(`/api/users/${id}`, {
      method: "PUT",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(user),
    });
    return response.json();
  }

  async deleteUser(id: number): Promise<ApiResponse<void>> {
    const response = await fetch(`/api/users/${id}`, {
      method: "DELETE",
    });
    return response.json();
  }
}
```

### 3. çŠ¶æ€ç®¡ç†ç±»å‹

**Redux ç±»å‹å®šä¹‰**

```typescript
import { createStore, applyMiddleware, combineReducers } from "redux";
import thunk, { ThunkAction, ThunkDispatch } from "redux-thunk";

// çŠ¶æ€ç±»å‹
interface UserState {
  users: User[];
  loading: boolean;
  error: string | null;
  currentUser: User | null;
}

interface AppState {
  user: UserState;
}

// Actionç±»å‹
type UserAction =
  | { type: "FETCH_USERS_START" }
  | { type: "FETCH_USERS_SUCCESS"; payload: User[] }
  | { type: "FETCH_USERS_ERROR"; payload: string }
  | { type: "SET_CURRENT_USER"; payload: User | null };

// Thunk Actionç±»å‹
type UserThunkAction = ThunkAction<
  Promise<void>,
  AppState,
  unknown,
  UserAction
>;

// Reducerç±»å‹
const userReducer = (
  state: UserState = {
    users: [],
    loading: false,
    error: null,
    currentUser: null,
  },
  action: UserAction
): UserState => {
  switch (action.type) {
    case "FETCH_USERS_START":
      return { ...state, loading: true, error: null };
    case "FETCH_USERS_SUCCESS":
      return { ...state, loading: false, users: action.payload };
    case "FETCH_USERS_ERROR":
      return { ...state, loading: false, error: action.payload };
    case "SET_CURRENT_USER":
      return { ...state, currentUser: action.payload };
    default:
      return state;
  }
};

// Storeç±»å‹
const rootReducer = combineReducers({
  user: userReducer,
});

export type RootState = ReturnType<typeof rootReducer>;
export type AppDispatch = ThunkDispatch<RootState, unknown, UserAction>;

const store = createStore(rootReducer, applyMiddleware(thunk));

// Action Creators
export const fetchUsers = (): UserThunkAction => {
  return async (dispatch) => {
    dispatch({ type: "FETCH_USERS_START" });
    try {
      const response = await fetch("/api/users");
      const users = await response.json();
      dispatch({ type: "FETCH_USERS_SUCCESS", payload: users });
    } catch (error) {
      dispatch({ type: "FETCH_USERS_ERROR", payload: error.message });
    }
  };
};
```

---

## é¢è¯•å¸¸è€ƒé—®é¢˜

### 1. ç±»å‹æ¨æ–­

```typescript
// é—®é¢˜ï¼šè§£é‡Šä»¥ä¸‹ä»£ç çš„ç±»å‹æ¨æ–­
let x = 1; // æ¨æ–­ä¸º number
let y = "hello"; // æ¨æ–­ä¸º string
let z = [1, 2, 3]; // æ¨æ–­ä¸º number[]

function add(a: number, b: number) {
  return a + b; // æ¨æ–­è¿”å›ç±»å‹ä¸º number
}

// ç­”æ¡ˆï¼šTypeScriptä¼šæ ¹æ®èµ‹å€¼å’Œä¸Šä¸‹æ–‡è‡ªåŠ¨æ¨æ–­ç±»å‹
```

### 2. è”åˆç±»å‹

```typescript
// é—®é¢˜ï¼šè§£é‡Šä»¥ä¸‹ä»£ç çš„ç±»å‹
type StringOrNumber = string | number;

function process(value: StringOrNumber) {
  if (typeof value === "string") {
    return value.toUpperCase(); // è¿™é‡Œvalueè¢«æ”¶çª„ä¸ºstring
  } else {
    return value * 2; // è¿™é‡Œvalueè¢«æ”¶çª„ä¸ºnumber
  }
}

// ç­”æ¡ˆï¼šè”åˆç±»å‹å…è®¸ä¸€ä¸ªå€¼å¯ä»¥æ˜¯å¤šç§ç±»å‹ä¸­çš„ä¸€ç§
```

### 3. æ³›å‹çº¦æŸ

```typescript
// é—®é¢˜ï¼šè§£é‡Šä»¥ä¸‹ä»£ç çš„æ³›å‹çº¦æŸ
interface Lengthwise {
  length: number;
}

function logLength<T extends Lengthwise>(arg: T): T {
  console.log(arg.length);
  return arg;
}

logLength("hello"); // 5
logLength([1, 2, 3]); // 3

// ç­”æ¡ˆï¼šæ³›å‹çº¦æŸé™åˆ¶äº†ç±»å‹å‚æ•°å¿…é¡»æ»¡è¶³ç‰¹å®šæ¡ä»¶
```

### 4. å·¥å…·ç±»å‹

```typescript
// é—®é¢˜ï¼šè§£é‡Šä»¥ä¸‹å·¥å…·ç±»å‹çš„ä½œç”¨
interface User {
  id: number;
  name: string;
  email: string;
}

type PartialUser = Partial<User>;
type RequiredUser = Required<PartialUser>;
type UserBasicInfo = Pick<User, "name" | "email">;
type UserWithoutId = Omit<User, "id">;

// ç­”æ¡ˆï¼š
// Partial: æ‰€æœ‰å±æ€§å¯é€‰
// Required: æ‰€æœ‰å±æ€§å¿…éœ€
// Pick: é€‰æ‹©æŒ‡å®šå±æ€§
// Omit: æ’é™¤æŒ‡å®šå±æ€§
```

---

## ğŸ“‹ æ€»ç»“

### è®°å¿†æŠ€å·§

1. **åˆ†ç±»è®°å¿†**ï¼šæŒ‰ç±»å‹ç³»ç»Ÿåˆ†ç±»è®°å¿†
2. **å¯¹æ¯”è®°å¿†**ï¼šJavaScript vs TypeScript
3. **å®ä¾‹è®°å¿†**ï¼šé€šè¿‡å®ä¾‹ç†è§£æ¦‚å¿µ
4. **å®è·µè®°å¿†**ï¼šé€šè¿‡å®é™…é¡¹ç›®åŠ æ·±ç†è§£
5. **æ€»ç»“è®°å¿†**ï¼šå®šæœŸæ€»ç»“å’Œå¤ä¹ 

### ä½¿ç”¨å»ºè®®

1. **æ¸è¿›å¼ä½¿ç”¨**ï¼šä»åŸºç¡€ç±»å‹å¼€å§‹ï¼Œé€æ­¥ä½¿ç”¨é«˜çº§ç‰¹æ€§
2. **ç±»å‹å®‰å…¨**ï¼šå……åˆ†åˆ©ç”¨ç±»å‹æ£€æŸ¥ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
3. **ä»£ç æç¤º**ï¼šåˆ©ç”¨ç±»å‹ç³»ç»Ÿæä¾›æ›´å¥½çš„ä»£ç æç¤º
4. **é‡æ„å®‰å…¨**ï¼šç±»å‹ç³»ç»Ÿè®©é‡æ„æ›´åŠ å®‰å…¨
5. **å›¢é˜Ÿåä½œ**ï¼šç±»å‹ç³»ç»Ÿæé«˜å›¢é˜Ÿåä½œæ•ˆç‡
