# å‡½æ•°å‘å±•å²

## ğŸ“š ç›®å½•

- [ES1 æ—¶ä»£ï¼ˆ1997 å¹´ï¼‰](#es1-æ—¶ä»£1997å¹´)
- [ES3 æ—¶ä»£ï¼ˆ1999 å¹´ï¼‰](#es3-æ—¶ä»£1999å¹´)
- [ES5 æ—¶ä»£ï¼ˆ2009 å¹´ï¼‰](#es5-æ—¶ä»£2009å¹´)
- [ES2015/ES6 æ—¶ä»£ï¼ˆ2015 å¹´ï¼‰](#es2015es6-æ—¶ä»£2015å¹´)
- [ES2017 æ—¶ä»£ï¼ˆ2017 å¹´ï¼‰](#es2017-æ—¶ä»£2017å¹´)
- [ES2019 æ—¶ä»£ï¼ˆ2019 å¹´ï¼‰](#es2019-æ—¶ä»£2019å¹´)
- [å®é™…åº”ç”¨åœºæ™¯](#å®é™…åº”ç”¨åœºæ™¯)
- [æ€§èƒ½å¯¹æ¯”ä¸æœ€ä½³å®è·µ](#æ€§èƒ½å¯¹æ¯”ä¸æœ€ä½³å®è·µ)
- [é¢è¯•å¸¸è€ƒç®—æ³•](#é¢è¯•å¸¸è€ƒç®—æ³•)

---

## ES1 æ—¶ä»£ï¼ˆ1997 å¹´ï¼‰

### ğŸ“ ES1 å‡½æ•°åŸºç¡€æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | ç‰¹æ€§      | è¯­æ³•                 | å‚æ•°     | è¿”å›å€¼ | ç”¨é€”     |
| -------- | --------- | -------------------- | -------- | ------ | -------- |
| **å£°æ˜** | function  | `function name() {}` | æ—        | å‡½æ•°   | å‡½æ•°å£°æ˜ |
| **è°ƒç”¨** | å‡½æ•°è°ƒç”¨  | `functionName()`     | å‚æ•°åˆ—è¡¨ | ä»»æ„   | æ‰§è¡Œå‡½æ•° |
| **å‚æ•°** | arguments | `arguments`          | æ—        | ç±»æ•°ç»„ | å‚æ•°å¯¹è±¡ |
| **è¿”å›** | return    | `return value`       | ä»»æ„å€¼   | ä»»æ„   | è¿”å›å€¼   |

### ğŸ”§ ES1 è¯¦ç»†æ–¹æ³•è¯´æ˜

**function å£°æ˜ - åŸºç¡€å‡½æ•°**

```javascript
// è¯­æ³•ï¼šfunction name(parameters) { body }
// å‚æ•°ï¼šå‚æ•°åˆ—è¡¨
// è¿”å›å€¼ï¼šå‡½æ•°

function greet(name) {
  return "Hello, " + name + "!";
}

console.log(greet("å¼ ä¸‰")); // "Hello, å¼ ä¸‰!"

// å®é™…åº”ç”¨ï¼šå·¥å…·å‡½æ•°
function calculateArea(width, height) {
  return width * height;
}
```

**arguments å¯¹è±¡ - å‚æ•°å¤„ç†**

```javascript
// è¯­æ³•ï¼šarguments
// å‚æ•°ï¼šæ— 
// è¿”å›å€¼ï¼šç±»æ•°ç»„å¯¹è±¡

function sum() {
  let total = 0;
  for (let i = 0; i < arguments.length; i++) {
    total += arguments[i];
  }
  return total;
}

console.log(sum(1, 2, 3, 4, 5)); // 15

// å®é™…åº”ç”¨ï¼šå¯å˜å‚æ•°å‡½æ•°
function max() {
  let maxValue = arguments[0];
  for (let i = 1; i < arguments.length; i++) {
    if (arguments[i] > maxValue) {
      maxValue = arguments[i];
    }
  }
  return maxValue;
}
```

---

## ES3 æ—¶ä»£ï¼ˆ1999 å¹´ï¼‰

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šES3 å¼•å…¥äº† Function æ„é€ å™¨ï¼Œæä¾›äº†åŠ¨æ€åˆ›å»ºå‡½æ•°çš„èƒ½åŠ›ï¼Œè®©å‡½æ•°åˆ›å»ºæ›´åŠ çµæ´»ã€‚

### ğŸ“ ES3 å‡½æ•°æ–¹æ³•æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | æ–¹æ³•       | è¯­æ³•                          | å‚æ•°        | è¿”å›å€¼ | ç”¨é€”         |
| -------- | ---------- | ----------------------------- | ----------- | ------ | ------------ |
| **æ„é€ ** | Function() | `new Function(...args, body)` | å‚æ•°,å‡½æ•°ä½“ | å‡½æ•°   | åŠ¨æ€åˆ›å»ºå‡½æ•° |

### ğŸ”§ ES3 è¯¦ç»†æ–¹æ³•è¯´æ˜

**Function() æ„é€ å™¨ - åŠ¨æ€åˆ›å»ºå‡½æ•°**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šæä¾›äº†åŠ¨æ€åˆ›å»ºå‡½æ•°çš„èƒ½åŠ›ï¼Œè®©å‡½æ•°åˆ›å»ºæ›´åŠ çµæ´»ï¼Œæ”¯æŒè¿è¡Œæ—¶ç”Ÿæˆå‡½æ•°ã€‚

```javascript
// è¯­æ³•ï¼šnew Function(...args, body)
// å‚æ•°ï¼šå‚æ•°åˆ—è¡¨, å‡½æ•°ä½“å­—ç¬¦ä¸²
// è¿”å›å€¼ï¼šå‡½æ•°

const add = new Function("a", "b", "return a + b");
console.log(add(2, 3)); // 5

// å®é™…åº”ç”¨ï¼šåŠ¨æ€å‡½æ•°ç”Ÿæˆ
function createValidator(rule) {
  return new Function("value", `return ${rule}`);
}

const isPositive = createValidator("value > 0");
console.log(isPositive(5)); // true
console.log(isPositive(-1)); // false
```

---

## ES5 æ—¶ä»£ï¼ˆ2009 å¹´ï¼‰

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šES5 å¼•å…¥äº† bind() æ–¹æ³•ï¼Œè§£å†³äº† this ç»‘å®šé—®é¢˜ï¼Œè®©å‡½æ•°è°ƒç”¨æ›´åŠ å¯æ§ã€‚

### ğŸ“ ES5 å‡½æ•°æ–¹æ³•æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | æ–¹æ³•   | è¯­æ³•                          | å‚æ•°         | è¿”å›å€¼ | ç”¨é€”             |
| -------- | ------ | ----------------------------- | ------------ | ------ | ---------------- |
| **ç»‘å®š** | bind() | `func.bind(thisArg, ...args)` | this å€¼,å‚æ•° | å‡½æ•°   | ç»‘å®š this å’Œå‚æ•° |

### ğŸ”§ ES5 è¯¦ç»†æ–¹æ³•è¯´æ˜

**bind() - ç»‘å®š this å’Œå‚æ•°**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº†å‡½æ•°è°ƒç”¨æ—¶ this æŒ‡å‘ä¸ç¡®å®šçš„é—®é¢˜ï¼Œè®©å‡½æ•°è°ƒç”¨æ›´åŠ å¯æ§ã€‚

```javascript
// è¯­æ³•ï¼šfunc.bind(thisArg, ...args)
// å‚æ•°ï¼šthiså€¼, é¢„è®¾å‚æ•°
// è¿”å›å€¼ï¼šæ–°å‡½æ•°

const person = {
  name: "å¼ ä¸‰",
  greet: function () {
    return "Hello, " + this.name;
  },
};

const boundGreet = person.greet.bind(person);
console.log(boundGreet()); // "Hello, å¼ ä¸‰"

// å®é™…åº”ç”¨ï¼šäº‹ä»¶å¤„ç†
function handleClick(event) {
  console.log("Clicked by:", this.name);
}

const button = document.getElementById("myButton");
button.addEventListener("click", handleClick.bind({ name: "ç”¨æˆ·" }));
```

---

## ES2015/ES6 æ—¶ä»£ï¼ˆ2015 å¹´ï¼‰

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šES6 æ˜¯å‡½æ•°ç‰¹æ€§çš„é‡å¤§æ›´æ–°ï¼Œå¼•å…¥äº†ç®­å¤´å‡½æ•°ã€é»˜è®¤å‚æ•°ã€å‰©ä½™å‚æ•°ç­‰ï¼Œè§£å†³äº†å‡½æ•°å®šä¹‰å’Œè°ƒç”¨çš„è¯¸å¤šç—›ç‚¹ã€‚

### ğŸ“ ES6 å‡½æ•°ç‰¹æ€§æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | ç‰¹æ€§       | è¯­æ³•                   | å‚æ•°     | è¿”å›å€¼ | ç”¨é€”       |
| -------- | ---------- | ---------------------- | -------- | ------ | ---------- |
| **å£°æ˜** | ç®­å¤´å‡½æ•°   | `() => {}`             | å‚æ•°åˆ—è¡¨ | ä»»æ„   | ç®€æ´å‡½æ•°   |
| **å‚æ•°** | é»˜è®¤å‚æ•°   | `function(a = 1) {}`   | é»˜è®¤å€¼   | ä»»æ„   | å‚æ•°é»˜è®¤å€¼ |
| **å‚æ•°** | å‰©ä½™å‚æ•°   | `function(...args) {}` | å‚æ•°åˆ—è¡¨ | ä»»æ„   | æ”¶é›†å‚æ•°   |
| **å‚æ•°** | è§£æ„å‚æ•°   | `function({a, b}) {}`  | è§£æ„å¯¹è±¡ | ä»»æ„   | å‚æ•°è§£æ„   |
| **è°ƒç”¨** | å±•å¼€è¿ç®—ç¬¦ | `func(...args)`        | æ•°ç»„     | ä»»æ„   | å±•å¼€å‚æ•°   |

### ğŸ”§ ES6 è¯¦ç»†æ–¹æ³•è¯´æ˜

**ç®­å¤´å‡½æ•° - ç®€æ´å‡½æ•°**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº† this ç»‘å®šé—®é¢˜ï¼Œæä¾›äº†æ›´ç®€æ´çš„å‡½æ•°è¯­æ³•ï¼Œè®©å‡½æ•°å®šä¹‰æ›´åŠ ç®€æ´ã€‚

```javascript
// è¯­æ³•ï¼š(parameters) => { body }
// å‚æ•°ï¼šå‚æ•°åˆ—è¡¨
// è¿”å›å€¼ï¼šå‡½æ•°

// åŸºç¡€ç”¨æ³•
const add = (a, b) => a + b;
console.log(add(2, 3)); // 5

// å®é™…åº”ç”¨ï¼šæ•°ç»„æ–¹æ³•
const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map((n) => n * 2);
console.log(doubled); // [2, 4, 6, 8, 10]

// this ç»‘å®šé—®é¢˜è§£å†³
const obj = {
  name: "å¼ ä¸‰",
  traditional: function () {
    setTimeout(function () {
      console.log(this.name); // undefined
    }, 1000);
  },
  arrow: function () {
    setTimeout(() => {
      console.log(this.name); // "å¼ ä¸‰"
    }, 1000);
  },
};
```

**é»˜è®¤å‚æ•° - å‚æ•°é»˜è®¤å€¼**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº†å‚æ•° undefined æ£€æŸ¥çš„é—®é¢˜ï¼Œè®©å‡½æ•°è°ƒç”¨æ›´åŠ ç®€æ´ã€‚

```javascript
// è¯­æ³•ï¼šfunction name(param = defaultValue) {}
// å‚æ•°ï¼šé»˜è®¤å€¼
// è¿”å›å€¼ï¼šå‡½æ•°

function greet(name = "World") {
  return `Hello, ${name}!`;
}

console.log(greet()); // "Hello, World!"
console.log(greet("å¼ ä¸‰")); // "Hello, å¼ ä¸‰!"

// å®é™…åº”ç”¨ï¼šé…ç½®å¯¹è±¡
function createUser(name, options = {}) {
  return {
    name,
    age: options.age || 18,
    email: options.email || "",
    isActive: options.isActive !== undefined ? options.isActive : true,
  };
}
```

**å‰©ä½™å‚æ•° - æ”¶é›†å‚æ•°**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº† arguments å¯¹è±¡çš„é—®é¢˜ï¼Œæä¾›äº†æ›´æ¸…æ™°çš„å‚æ•°æ”¶é›†æ–¹å¼ã€‚

```javascript
// è¯­æ³•ï¼šfunction name(...args) {}
// å‚æ•°ï¼šå‚æ•°åˆ—è¡¨
// è¿”å›å€¼ï¼šå‡½æ•°

function sum(...numbers) {
  return numbers.reduce((total, num) => total + num, 0);
}

console.log(sum(1, 2, 3, 4, 5)); // 15

// å®é™…åº”ç”¨ï¼šå‡½æ•°ç»„åˆ
function compose(...fns) {
  return function (value) {
    return fns.reduceRight((acc, fn) => fn(acc), value);
  };
}

const addOne = (x) => x + 1;
const multiplyTwo = (x) => x * 2;
const composed = compose(addOne, multiplyTwo);
console.log(composed(5)); // 11
```

**è§£æ„å‚æ•° - å‚æ•°è§£æ„**

```javascript
// è¯­æ³•ï¼šfunction name({param1, param2}) {}
// å‚æ•°ï¼šè§£æ„å¯¹è±¡
// è¿”å›å€¼ï¼šå‡½æ•°

function createPerson({ name, age, city = "åŒ—äº¬" }) {
  return { name, age, city };
}

const person = createPerson({
  name: "å¼ ä¸‰",
  age: 25,
});
console.log(person); // {name: "å¼ ä¸‰", age: 25, city: "åŒ—äº¬"}

// å®é™…åº”ç”¨ï¼šAPIè°ƒç”¨
function fetchUser({ id, includeProfile = false }) {
  const url = `/api/users/${id}${includeProfile ? "?include=profile" : ""}`;
  return fetch(url);
}
```

---

## ES2017 æ—¶ä»£ï¼ˆ2017 å¹´ï¼‰

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šES2017 å¼•å…¥äº† async/awaitï¼Œè§£å†³äº†å›è°ƒåœ°ç‹±å’Œ Promise é“¾å¼è°ƒç”¨çš„é—®é¢˜ï¼Œè®©å¼‚æ­¥ç¼–ç¨‹æ›´åŠ ç®€æ´ã€‚

### ğŸ“ ES2017 å‡½æ•°ç‰¹æ€§æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | ç‰¹æ€§  | è¯­æ³•                  | å‚æ•°    | è¿”å›å€¼  | ç”¨é€”         |
| -------- | ----- | --------------------- | ------- | ------- | ------------ |
| **å¼‚æ­¥** | async | `async function() {}` | æ—       | Promise | å¼‚æ­¥å‡½æ•°     |
| **å¼‚æ­¥** | await | `await promise`       | Promise | ä»»æ„    | ç­‰å¾… Promise |

### ğŸ”§ ES2017 è¯¦ç»†æ–¹æ³•è¯´æ˜

**async/await - å¼‚æ­¥ç¼–ç¨‹**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº†å›è°ƒåœ°ç‹±å’Œ Promise é“¾å¼è°ƒç”¨çš„é—®é¢˜ï¼Œè®©å¼‚æ­¥ä»£ç æ›´åŠ ç®€æ´æ˜“è¯»ã€‚

```javascript
// è¯­æ³•ï¼šasync function name() { await promise }
// å‚æ•°ï¼šæ— 
// è¿”å›å€¼ï¼šPromise

// åŸºç¡€ç”¨æ³•
async function fetchData() {
  try {
    const response = await fetch("/api/data");
    const data = await response.json();
    return data;
  } catch (error) {
    console.error("Error:", error);
  }
}

// å®é™…åº”ç”¨ï¼šé¡ºåºå¼‚æ­¥æ“ä½œ
async function processUserData(userId) {
  try {
    const user = await fetchUser(userId);
    const profile = await fetchProfile(user.id);
    const posts = await fetchPosts(user.id);

    return {
      user,
      profile,
      posts,
    };
  } catch (error) {
    console.error("Processing failed:", error);
  }
}

// å¯¹æ¯”ï¼šPromise é“¾å¼è°ƒç”¨
function processUserDataPromise(userId) {
  return fetchUser(userId)
    .then((user) => fetchProfile(user.id))
    .then((profile) => fetchPosts(profile.userId))
    .then((posts) => ({ user, profile, posts }))
    .catch((error) => console.error("Processing failed:", error));
}
```

---

## ES2019 æ—¶ä»£ï¼ˆ2019 å¹´ï¼‰

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šES2019 å¼•å…¥äº†å¯é€‰çš„ catch ç»‘å®šï¼Œè§£å†³äº† catch å—ä¸­å¿…é¡»ä½¿ç”¨ error å‚æ•°çš„é—®é¢˜ã€‚

### ğŸ“ ES2019 å‡½æ•°ç‰¹æ€§æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | ç‰¹æ€§       | è¯­æ³•       | å‚æ•° | è¿”å›å€¼ | ç”¨é€”         |
| -------- | ---------- | ---------- | ---- | ------ | ------------ |
| **å¼‚å¸¸** | catch ç»‘å®š | `catch {}` | æ—    | æ—      | å¯é€‰é”™è¯¯ç»‘å®š |

### ğŸ”§ ES2019 è¯¦ç»†æ–¹æ³•è¯´æ˜

**å¯é€‰çš„ catch ç»‘å®š**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº† catch å—ä¸­å¿…é¡»ä½¿ç”¨ error å‚æ•°çš„é—®é¢˜ï¼Œè®©é”™è¯¯å¤„ç†æ›´åŠ çµæ´»ã€‚

```javascript
// è¯­æ³•ï¼štry { } catch { }
// å‚æ•°ï¼šæ— 
// è¿”å›å€¼ï¼šæ— 

// åŸºç¡€ç”¨æ³•
async function fetchData() {
  try {
    const response = await fetch("/api/data");
    return await response.json();
  } catch {
    // ä¸éœ€è¦ä½¿ç”¨ error å‚æ•°
    return null;
  }
}

// å®é™…åº”ç”¨ï¼šèµ„æºæ¸…ç†
async function cleanup() {
  try {
    await closeDatabase();
    await clearCache();
  } catch {
    // å¿½ç•¥æ¸…ç†é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ
  }
}
```

---

## å®é™…åº”ç”¨åœºæ™¯

### 1. å‡½æ•°å¼ç¼–ç¨‹åœºæ™¯

**é«˜é˜¶å‡½æ•°åº”ç”¨**

```javascript
// å‡½æ•°ç»„åˆ
const pipe =
  (...fns) =>
  (value) =>
    fns.reduce((acc, fn) => fn(acc), value);

const addOne = (x) => x + 1;
const multiplyTwo = (x) => x * 2;
const square = (x) => x * x;

const transform = pipe(addOne, multiplyTwo, square);
console.log(transform(3)); // 64

// å®é™…åº”ç”¨ï¼šæ•°æ®è½¬æ¢ç®¡é“
const processUserData = pipe(
  (user) => ({ ...user, fullName: `${user.firstName} ${user.lastName}` }),
  (user) => ({ ...user, isAdult: user.age >= 18 }),
  (user) => ({ ...user, displayName: user.isAdult ? user.fullName : "Child" })
);
```

### 2. å¼‚æ­¥ç¼–ç¨‹åœºæ™¯

**å¹¶å‘æ§åˆ¶**

```javascript
// é™åˆ¶å¹¶å‘æ•°é‡
async function limitConcurrency(tasks, limit = 3) {
  const results = [];
  const executing = [];

  for (const task of tasks) {
    const promise = task().then((result) => {
      executing.splice(executing.indexOf(promise), 1);
      return result;
    });

    results.push(promise);
    executing.push(promise);

    if (executing.length >= limit) {
      await Promise.race(executing);
    }
  }

  return Promise.all(results);
}

// å®é™…åº”ç”¨ï¼šæ‰¹é‡APIè°ƒç”¨
async function fetchUsers(userIds) {
  const tasks = userIds.map((id) => () => fetchUser(id));
  return limitConcurrency(tasks, 5);
}
```

### 3. äº‹ä»¶å¤„ç†åœºæ™¯

**é˜²æŠ–å’ŒèŠ‚æµ**

```javascript
// é˜²æŠ–å‡½æ•°
function debounce(func, delay) {
  let timeoutId;
  return function (...args) {
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => func.apply(this, args), delay);
  };
}

// èŠ‚æµå‡½æ•°
function throttle(func, delay) {
  let lastCall = 0;
  return function (...args) {
    const now = Date.now();
    if (now - lastCall >= delay) {
      lastCall = now;
      return func.apply(this, args);
    }
  };
}

// å®é™…åº”ç”¨ï¼šæœç´¢è¾“å…¥
const searchInput = document.getElementById("search");
const debouncedSearch = debounce(async (query) => {
  const results = await searchAPI(query);
  displayResults(results);
}, 300);

searchInput.addEventListener("input", (e) => {
  debouncedSearch(e.target.value);
});
```

---

## æ€§èƒ½å¯¹æ¯”ä¸æœ€ä½³å®è·µ

### 1. å‡½æ•°å£°æ˜ vs å‡½æ•°è¡¨è¾¾å¼

```javascript
// æ€§èƒ½æµ‹è¯•
function performanceTest() {
  const iterations = 1000000;

  // å‡½æ•°å£°æ˜
  function declared() {
    return "declared";
  }

  // å‡½æ•°è¡¨è¾¾å¼
  const expressed = function () {
    return "expressed";
  };

  // ç®­å¤´å‡½æ•°
  const arrow = () => "arrow";

  console.time("å‡½æ•°å£°æ˜");
  for (let i = 0; i < iterations; i++) {
    declared();
  }
  console.timeEnd("å‡½æ•°å£°æ˜");

  console.time("å‡½æ•°è¡¨è¾¾å¼");
  for (let i = 0; i < iterations; i++) {
    expressed();
  }
  console.timeEnd("å‡½æ•°è¡¨è¾¾å¼");

  console.time("ç®­å¤´å‡½æ•°");
  for (let i = 0; i < iterations; i++) {
    arrow();
  }
  console.timeEnd("ç®­å¤´å‡½æ•°");
}

// å…¸å‹ç»“æœï¼šå‡½æ•°å£°æ˜ > å‡½æ•°è¡¨è¾¾å¼ > ç®­å¤´å‡½æ•°
```

### 2. æœ€ä½³å®è·µå»ºè®®

**å‡½æ•°è®¾è®¡æœ€ä½³å®è·µï¼š**

```javascript
// âœ… æ¨èï¼šä½¿ç”¨ç®­å¤´å‡½æ•°å¤„ç† this ç»‘å®š
const obj = {
  name: "å¼ ä¸‰",
  methods: {
    traditional: function () {
      setTimeout(function () {
        console.log(this.name); // undefined
      }, 1000);
    },
    arrow: function () {
      setTimeout(() => {
        console.log(this.name); // "å¼ ä¸‰"
      }, 1000);
    },
  },
};

// âœ… æ¨èï¼šä½¿ç”¨é»˜è®¤å‚æ•°
function createUser(name, options = {}) {
  return {
    name,
    age: options.age || 18,
    email: options.email || "",
  };
}

// âœ… æ¨èï¼šä½¿ç”¨å‰©ä½™å‚æ•°
function sum(...numbers) {
  return numbers.reduce((total, num) => total + num, 0);
}

// âœ… æ¨èï¼šä½¿ç”¨ async/await
async function fetchData() {
  try {
    const response = await fetch("/api/data");
    return await response.json();
  } catch (error) {
    console.error("Error:", error);
  }
}

// âŒ é¿å…ï¼šä½¿ç”¨ arguments å¯¹è±¡
function badSum() {
  let total = 0;
  for (let i = 0; i < arguments.length; i++) {
    total += arguments[i];
  }
  return total;
}

// âœ… å¥½çš„åšæ³•
function goodSum(...numbers) {
  return numbers.reduce((total, num) => total + num, 0);
}
```

---

## é¢è¯•å¸¸è€ƒç®—æ³•

### 1. å‡½æ•°æŸ¯é‡ŒåŒ–

```javascript
// åŸºç¡€æŸ¯é‡ŒåŒ–
function curry(fn) {
  return function curried(...args) {
    if (args.length >= fn.length) {
      return fn.apply(this, args);
    } else {
      return function (...nextArgs) {
        return curried.apply(this, args.concat(nextArgs));
      };
    }
  };
}

// æµ‹è¯•
const add = (a, b, c) => a + b + c;
const curriedAdd = curry(add);

console.log(curriedAdd(1)(2)(3)); // 6
console.log(curriedAdd(1, 2)(3)); // 6
console.log(curriedAdd(1)(2, 3)); // 6
```

### 2. å‡½æ•°ç»„åˆ

```javascript
// å‡½æ•°ç»„åˆ
function compose(...fns) {
  return function (value) {
    return fns.reduceRight((acc, fn) => fn(acc), value);
  };
}

// ç®¡é“å‡½æ•°
function pipe(...fns) {
  return function (value) {
    return fns.reduce((acc, fn) => fn(acc), value);
  };
}

// æµ‹è¯•
const addOne = (x) => x + 1;
const multiplyTwo = (x) => x * 2;
const square = (x) => x * x;

const composed = compose(square, multiplyTwo, addOne);
const piped = pipe(addOne, multiplyTwo, square);

console.log(composed(3)); // 64
console.log(piped(3)); // 64
```

### 3. å‡½æ•°è®°å¿†åŒ–

```javascript
// è®°å¿†åŒ–å‡½æ•°
function memoize(fn) {
  const cache = new Map();
  return function (...args) {
    const key = JSON.stringify(args);
    if (cache.has(key)) {
      return cache.get(key);
    }
    const result = fn.apply(this, args);
    cache.set(key, result);
    return result;
  };
}

// æµ‹è¯•ï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—
const fibonacci = memoize(function (n) {
  if (n <= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
});

console.log(fibonacci(40)); // 102334155 (å¿«é€Ÿè®¡ç®—)
```

### 4. å‡½æ•°é˜²æŠ–å’ŒèŠ‚æµ

```javascript
// é˜²æŠ–å‡½æ•°
function debounce(func, delay) {
  let timeoutId;
  return function (...args) {
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => func.apply(this, args), delay);
  };
}

// èŠ‚æµå‡½æ•°
function throttle(func, delay) {
  let lastCall = 0;
  return function (...args) {
    const now = Date.now();
    if (now - lastCall >= delay) {
      lastCall = now;
      return func.apply(this, args);
    }
  };
}

// æµ‹è¯•
const debouncedLog = debounce(console.log, 300);
const throttledLog = throttle(console.log, 300);

// å¿«é€Ÿè°ƒç”¨
for (let i = 0; i < 10; i++) {
  debouncedLog("debounced", i);
  throttledLog("throttled", i);
}
```

---

## ğŸ“‹ æ€»ç»“

### è®°å¿†æŠ€å·§

1. **åˆ†ç±»è®°å¿†**ï¼šæŒ‰åŠŸèƒ½åˆ†ç±»ï¼ˆå£°æ˜ã€è°ƒç”¨ã€å‚æ•°ã€å¼‚æ­¥ï¼‰
2. **å¯¹æ¯”è®°å¿†**ï¼šä¼ ç»Ÿå‡½æ•° vs ç®­å¤´å‡½æ•°
3. **this ç»‘å®šè®°å¿†**ï¼šç®­å¤´å‡½æ•°ä¸ç»‘å®š this
4. **å‚æ•°è®°å¿†**ï¼šé»˜è®¤å‚æ•°ã€å‰©ä½™å‚æ•°ã€è§£æ„å‚æ•°
5. **å¼‚æ­¥è®°å¿†**ï¼šasync/await ç®€åŒ–å¼‚æ­¥ç¼–ç¨‹

### ä½¿ç”¨å»ºè®®

1. **ä¼˜å…ˆä½¿ç”¨ç®­å¤´å‡½æ•°**ï¼šç®€æ´ã€this ç»‘å®šæ¸…æ™°
2. **ä½¿ç”¨é»˜è®¤å‚æ•°**ï¼šé¿å… undefined æ£€æŸ¥
3. **ä½¿ç”¨å‰©ä½™å‚æ•°**ï¼šæ›¿ä»£ arguments å¯¹è±¡
4. **ä½¿ç”¨ async/await**ï¼šç®€åŒ–å¼‚æ­¥ç¼–ç¨‹
5. **æ³¨æ„æ€§èƒ½å·®å¼‚**ï¼šé€‰æ‹©åˆé€‚çš„å‡½æ•°ç±»å‹
