# å¯¹è±¡å‘å±•å²

## ğŸ“š ç›®å½•

- [ES1 æ—¶ä»£ï¼ˆ1997 å¹´ï¼‰](#es1-æ—¶ä»£1997å¹´)
- [ES3 æ—¶ä»£ï¼ˆ1999 å¹´ï¼‰](#es3-æ—¶ä»£1999å¹´)
- [ES5 æ—¶ä»£ï¼ˆ2009 å¹´ï¼‰](#es5-æ—¶ä»£2009å¹´)
- [ES2015/ES6 æ—¶ä»£ï¼ˆ2015 å¹´ï¼‰](#es2015es6-æ—¶ä»£2015å¹´)
- [ES2017 æ—¶ä»£ï¼ˆ2017 å¹´ï¼‰](#es2017-æ—¶ä»£2017å¹´)
- [ES2018 æ—¶ä»£ï¼ˆ2018 å¹´ï¼‰](#es2018-æ—¶ä»£2018å¹´)
- [ES2019 æ—¶ä»£ï¼ˆ2019 å¹´ï¼‰](#es2019-æ—¶ä»£2019å¹´)
- [ES2022 æ—¶ä»£ï¼ˆ2022 å¹´ï¼‰](#es2022-æ—¶ä»£2022å¹´)
- [å®é™…åº”ç”¨åœºæ™¯](#å®é™…åº”ç”¨åœºæ™¯)
- [æ€§èƒ½å¯¹æ¯”ä¸æœ€ä½³å®è·µ](#æ€§èƒ½å¯¹æ¯”ä¸æœ€ä½³å®è·µ)
- [é¢è¯•å¸¸è€ƒç®—æ³•](#é¢è¯•å¸¸è€ƒç®—æ³•)

---

## ES1 æ—¶ä»£ï¼ˆ1997 å¹´ï¼‰

### ğŸ“ ES1 å¯¹è±¡åŸºç¡€æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | ç‰¹æ€§       | è¯­æ³•                   | å‚æ•°   | è¿”å›å€¼ | ç”¨é€”     |
| -------- | ---------- | ---------------------- | ------ | ------ | -------- |
| **åˆ›å»º** | å¯¹è±¡å­—é¢é‡ | `{}`                   | æ—      | å¯¹è±¡   | åˆ›å»ºå¯¹è±¡ |
| **è®¿é—®** | ç‚¹è¯­æ³•     | `obj.property`         | å±æ€§å | å±æ€§å€¼ | è®¿é—®å±æ€§ |
| **è®¿é—®** | æ–¹æ‹¬å·è¯­æ³• | `obj['property']`      | å±æ€§å | å±æ€§å€¼ | åŠ¨æ€è®¿é—® |
| **ä¿®æ”¹** | å±æ€§èµ‹å€¼   | `obj.property = value` | å±æ€§å€¼ | å±æ€§å€¼ | è®¾ç½®å±æ€§ |
| **åˆ é™¤** | delete     | `delete obj.property`  | å±æ€§å | å¸ƒå°”å€¼ | åˆ é™¤å±æ€§ |

### ğŸ”§ ES1 è¯¦ç»†æ–¹æ³•è¯´æ˜

**å¯¹è±¡å­—é¢é‡ - åˆ›å»ºå¯¹è±¡**

```javascript
// è¯­æ³•ï¼š{ key: value }
// å‚æ•°ï¼šé”®å€¼å¯¹
// è¿”å›å€¼ï¼šå¯¹è±¡

const person = {
  name: "å¼ ä¸‰",
  age: 25,
  city: "åŒ—äº¬",
};

console.log(person.name); // "å¼ ä¸‰"
console.log(person["age"]); // 25

// å®é™…åº”ç”¨ï¼šé…ç½®å¯¹è±¡
const config = {
  apiUrl: "https://api.example.com",
  timeout: 5000,
  retries: 3,
};
```

**å±æ€§è®¿é—® - åŠ¨æ€è®¿é—®**

```javascript
// è¯­æ³•ï¼šobj[propertyName]
// å‚æ•°ï¼šå±æ€§å
// è¿”å›å€¼ï¼šå±æ€§å€¼

const obj = {
  name: "å¼ ä¸‰",
  age: 25,
};

const propertyName = "name";
console.log(obj[propertyName]); // "å¼ ä¸‰"

// å®é™…åº”ç”¨ï¼šåŠ¨æ€å±æ€§è®¿é—®
function getProperty(obj, prop) {
  return obj[prop];
}
```

---

## ES3 æ—¶ä»£ï¼ˆ1999 å¹´ï¼‰

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šES3 å¼•å…¥äº† Object åŸå‹æ–¹æ³•ï¼Œæä¾›äº†å¯¹è±¡æ“ä½œçš„åŸºç¡€èƒ½åŠ›ï¼Œè®©å¯¹è±¡å¤„ç†æ›´åŠ ä¾¿æ·ã€‚

### ğŸ“ ES3 å¯¹è±¡æ–¹æ³•æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | æ–¹æ³•           | è¯­æ³•                       | å‚æ•°   | è¿”å›å€¼ | ç”¨é€”         |
| -------- | -------------- | -------------------------- | ------ | ------ | ------------ |
| **æ£€æŸ¥** | hasOwnProperty | `obj.hasOwnProperty(prop)` | å±æ€§å | å¸ƒå°”å€¼ | æ£€æŸ¥è‡ªæœ‰å±æ€§ |
| **æ£€æŸ¥** | isPrototypeOf  | `obj.isPrototypeOf(other)` | å¯¹è±¡   | å¸ƒå°”å€¼ | æ£€æŸ¥åŸå‹å…³ç³» |
| **è½¬æ¢** | toString()     | `obj.toString()`           | æ—      | å­—ç¬¦ä¸² | è½¬å­—ç¬¦ä¸²     |
| **è½¬æ¢** | valueOf()      | `obj.valueOf()`            | æ—      | åŸå§‹å€¼ | è½¬åŸå§‹å€¼     |

### ğŸ”§ ES3 è¯¦ç»†æ–¹æ³•è¯´æ˜

**hasOwnProperty() - æ£€æŸ¥è‡ªæœ‰å±æ€§**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº†åŒºåˆ†è‡ªæœ‰å±æ€§å’Œç»§æ‰¿å±æ€§çš„é—®é¢˜ï¼Œè®©å±æ€§æ£€æŸ¥æ›´åŠ å‡†ç¡®ã€‚

```javascript
// è¯­æ³•ï¼šobj.hasOwnProperty(property)
// å‚æ•°ï¼šå±æ€§å
// è¿”å›å€¼ï¼šå¸ƒå°”å€¼

const obj = {
  name: "å¼ ä¸‰",
  age: 25,
};

console.log(obj.hasOwnProperty("name")); // true
console.log(obj.hasOwnProperty("toString")); // false (ç»§æ‰¿å±æ€§)

// å®é™…åº”ç”¨ï¼šå¯¹è±¡éå†
function getOwnProperties(obj) {
  const ownProps = [];
  for (const key in obj) {
    if (obj.hasOwnProperty(key)) {
      ownProps.push(key);
    }
  }
  return ownProps;
}
```

**toString() - å¯¹è±¡è½¬å­—ç¬¦ä¸²**

```javascript
// è¯­æ³•ï¼šobj.toString()
// å‚æ•°ï¼šæ— 
// è¿”å›å€¼ï¼šå­—ç¬¦ä¸²

const obj = {
  name: "å¼ ä¸‰",
  age: 25,
  toString() {
    return `${this.name} (${this.age})`;
  },
};

console.log(obj.toString()); // "å¼ ä¸‰ (25)"

// å®é™…åº”ç”¨ï¼šè‡ªå®šä¹‰å­—ç¬¦ä¸²è¡¨ç¤º
class Person {
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }

  toString() {
    return `Person(${this.name}, ${this.age})`;
  }
}
```

---

## ES5 æ—¶ä»£ï¼ˆ2009 å¹´ï¼‰

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šES5 å¼•å…¥äº†å¯¹è±¡å±æ€§æè¿°ç¬¦å’Œé™æ€æ–¹æ³•ï¼Œè§£å†³äº†å¯¹è±¡å±æ€§æ§åˆ¶å’Œæ“ä½œçš„é—®é¢˜ï¼Œè®©å¯¹è±¡å¤„ç†æ›´åŠ ç²¾ç»†ã€‚

### ğŸ“ ES5 å¯¹è±¡æ–¹æ³•æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | æ–¹æ³•                     | è¯­æ³•                                         | å‚æ•°             | è¿”å›å€¼ | ç”¨é€”           |
| -------- | ------------------------ | -------------------------------------------- | ---------------- | ------ | -------------- |
| **æ§åˆ¶** | defineProperty           | `Object.defineProperty(obj, prop, desc)`     | å¯¹è±¡,å±æ€§,æè¿°ç¬¦ | å¯¹è±¡   | å®šä¹‰å±æ€§       |
| **æ§åˆ¶** | defineProperties         | `Object.defineProperties(obj, props)`        | å¯¹è±¡,å±æ€§æè¿°ç¬¦  | å¯¹è±¡   | æ‰¹é‡å®šä¹‰å±æ€§   |
| **è·å–** | getOwnPropertyDescriptor | `Object.getOwnPropertyDescriptor(obj, prop)` | å¯¹è±¡,å±æ€§        | æè¿°ç¬¦ | è·å–å±æ€§æè¿°ç¬¦ |
| **è·å–** | getOwnPropertyNames      | `Object.getOwnPropertyNames(obj)`            | å¯¹è±¡             | æ•°ç»„   | è·å–æ‰€æœ‰å±æ€§å |
| **è·å–** | keys                     | `Object.keys(obj)`                           | å¯¹è±¡             | æ•°ç»„   | è·å–å¯æšä¸¾å±æ€§ |
| **è·å–** | getPrototypeOf           | `Object.getPrototypeOf(obj)`                 | å¯¹è±¡             | å¯¹è±¡   | è·å–åŸå‹       |
| **è®¾ç½®** | setPrototypeOf           | `Object.setPrototypeOf(obj, proto)`          | å¯¹è±¡,åŸå‹        | å¯¹è±¡   | è®¾ç½®åŸå‹       |
| **åˆ›å»º** | create                   | `Object.create(proto)`                       | åŸå‹             | å¯¹è±¡   | åˆ›å»ºå¯¹è±¡       |
| **å†»ç»“** | freeze                   | `Object.freeze(obj)`                         | å¯¹è±¡             | å¯¹è±¡   | å†»ç»“å¯¹è±¡       |
| **å¯†å°** | seal                     | `Object.seal(obj)`                           | å¯¹è±¡             | å¯¹è±¡   | å¯†å°å¯¹è±¡       |
| **æ‰©å±•** | preventExtensions        | `Object.preventExtensions(obj)`              | å¯¹è±¡             | å¯¹è±¡   | ç¦æ­¢æ‰©å±•       |

### ğŸ”§ ES5 è¯¦ç»†æ–¹æ³•è¯´æ˜

**Object.defineProperty() - å®šä¹‰å±æ€§**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº†å¯¹è±¡å±æ€§æ§åˆ¶çš„é—®é¢˜ï¼Œè®©å±æ€§å¯ä»¥è®¾ç½®ä¸ºåªè¯»ã€ä¸å¯æšä¸¾ã€ä¸å¯é…ç½®ç­‰ã€‚

```javascript
// è¯­æ³•ï¼šObject.defineProperty(obj, prop, descriptor)
// å‚æ•°ï¼šå¯¹è±¡, å±æ€§å, æè¿°ç¬¦
// è¿”å›å€¼ï¼šå¯¹è±¡

const obj = {};

Object.defineProperty(obj, "name", {
  value: "å¼ ä¸‰",
  writable: false, // ä¸å¯å†™
  enumerable: true, // å¯æšä¸¾
  configurable: false, // ä¸å¯é…ç½®
});

console.log(obj.name); // "å¼ ä¸‰"
obj.name = "æå››"; // æ— æ•ˆï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™

// å®é™…åº”ç”¨ï¼šåˆ›å»ºåªè¯»å±æ€§
function createReadOnlyObject(data) {
  const obj = {};
  Object.keys(data).forEach((key) => {
    Object.defineProperty(obj, key, {
      value: data[key],
      writable: false,
      enumerable: true,
      configurable: false,
    });
  });
  return obj;
}
```

**Object.keys() - è·å–å¯æšä¸¾å±æ€§**

```javascript
// è¯­æ³•ï¼šObject.keys(obj)
// å‚æ•°ï¼šå¯¹è±¡
// è¿”å›å€¼ï¼šå±æ€§åæ•°ç»„

const obj = {
  name: "å¼ ä¸‰",
  age: 25,
  city: "åŒ—äº¬",
};

console.log(Object.keys(obj)); // ["name", "age", "city"]

// å®é™…åº”ç”¨ï¼šå¯¹è±¡éå†
function processObject(obj) {
  return Object.keys(obj).map((key) => ({
    key,
    value: obj[key],
    type: typeof obj[key],
  }));
}
```

**Object.create() - åˆ›å»ºå¯¹è±¡**

```javascript
// è¯­æ³•ï¼šObject.create(proto, propertiesObject)
// å‚æ•°ï¼šåŸå‹å¯¹è±¡, å±æ€§æè¿°ç¬¦
// è¿”å›å€¼ï¼šæ–°å¯¹è±¡

const personProto = {
  greet() {
    return `Hello, I'm ${this.name}`;
  },
};

const person = Object.create(personProto, {
  name: {
    value: "å¼ ä¸‰",
    writable: true,
    enumerable: true,
  },
  age: {
    value: 25,
    writable: true,
    enumerable: true,
  },
});

console.log(person.greet()); // "Hello, I'm å¼ ä¸‰"

// å®é™…åº”ç”¨ï¼šç»§æ‰¿
function createUser(name, age) {
  const user = Object.create(userProto);
  user.name = name;
  user.age = age;
  return user;
}
```

---

## ES2015/ES6 æ—¶ä»£ï¼ˆ2015 å¹´ï¼‰

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šES6 å¼•å…¥äº†å¯¹è±¡è§£æ„ã€å±æ€§ç®€å†™ã€æ–¹æ³•ç®€å†™ç­‰ç‰¹æ€§ï¼Œè§£å†³äº†å¯¹è±¡æ“ä½œç¹ççš„é—®é¢˜ï¼Œè®©å¯¹è±¡å¤„ç†æ›´åŠ ç®€æ´ã€‚

### ğŸ“ ES6 å¯¹è±¡ç‰¹æ€§æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | ç‰¹æ€§                  | è¯­æ³•                                | å‚æ•°            | è¿”å›å€¼ | ç”¨é€”       |
| -------- | --------------------- | ----------------------------------- | --------------- | ------ | ---------- |
| **è§£æ„** | å¯¹è±¡è§£æ„              | `const {a, b} = obj`                | å¯¹è±¡            | å˜é‡   | è§£æ„èµ‹å€¼   |
| **è§£æ„** | åµŒå¥—è§£æ„              | `const {a: {b}} = obj`              | å¯¹è±¡            | å˜é‡   | åµŒå¥—è§£æ„   |
| **è§£æ„** | é»˜è®¤å€¼                | `const {a = 1} = obj`               | å¯¹è±¡            | å˜é‡   | è§£æ„é»˜è®¤å€¼ |
| **è§£æ„** | å‰©ä½™å±æ€§              | `const {a, ...rest} = obj`          | å¯¹è±¡            | å˜é‡   | å‰©ä½™å±æ€§   |
| **ç®€å†™** | å±æ€§ç®€å†™              | `{name}`                            | å˜é‡            | å¯¹è±¡   | å±æ€§ç®€å†™   |
| **ç®€å†™** | æ–¹æ³•ç®€å†™              | `{method() {}}`                     | æ—               | å¯¹è±¡   | æ–¹æ³•ç®€å†™   |
| **è®¡ç®—** | è®¡ç®—å±æ€§å            | `{[key]: value}`                    | è¡¨è¾¾å¼          | å¯¹è±¡   | åŠ¨æ€å±æ€§å |
| **åˆå¹¶** | Object.assign         | `Object.assign(target, ...sources)` | ç›®æ ‡å¯¹è±¡,æºå¯¹è±¡ | å¯¹è±¡   | å¯¹è±¡åˆå¹¶   |
| **è®¾ç½®** | Object.setPrototypeOf | `Object.setPrototypeOf(obj, proto)` | å¯¹è±¡,åŸå‹       | å¯¹è±¡   | è®¾ç½®åŸå‹   |

### ğŸ”§ ES6 è¯¦ç»†æ–¹æ³•è¯´æ˜

**å¯¹è±¡è§£æ„ - è§£æ„èµ‹å€¼**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº†å¯¹è±¡å±æ€§è®¿é—®ç¹ççš„é—®é¢˜ï¼Œè®©å¯¹è±¡å±æ€§æå–æ›´åŠ ç®€æ´ã€‚

```javascript
// è¯­æ³•ï¼šconst {property1, property2} = object
// å‚æ•°ï¼šå¯¹è±¡
// è¿”å›å€¼ï¼šå˜é‡

const person = {
  name: "å¼ ä¸‰",
  age: 25,
  city: "åŒ—äº¬",
};

// åŸºç¡€è§£æ„
const { name, age } = person;
console.log(name, age); // "å¼ ä¸‰" 25

// é‡å‘½å
const { name: personName, age: personAge } = person;
console.log(personName, personAge); // "å¼ ä¸‰" 25

// é»˜è®¤å€¼
const { name, age, country = "ä¸­å›½" } = person;
console.log(country); // "ä¸­å›½"

// å®é™…åº”ç”¨ï¼šå‡½æ•°å‚æ•°
function greetUser({ name, age, city = "æœªçŸ¥" }) {
  return `ä½ å¥½ï¼Œ${name}ï¼Œ${age}å²ï¼Œæ¥è‡ª${city}`;
}
```

**å±æ€§ç®€å†™ - ç®€æ´å¯¹è±¡**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº†å¯¹è±¡å±æ€§å®šä¹‰ç¹ççš„é—®é¢˜ï¼Œè®©å¯¹è±¡åˆ›å»ºæ›´åŠ ç®€æ´ã€‚

```javascript
// è¯­æ³•ï¼š{property} ç­‰ä»·äº {property: property}
// å‚æ•°ï¼šå˜é‡
// è¿”å›å€¼ï¼šå¯¹è±¡

const name = "å¼ ä¸‰";
const age = 25;

// ä¼ ç»Ÿå†™æ³•
const person1 = {
  name: name,
  age: age,
};

// ç®€å†™
const person2 = { name, age };

// æ–¹æ³•ç®€å†™
const person3 = {
  name,
  age,
  greet() {
    return `Hello, I'm ${this.name}`;
  },
};

// å®é™…åº”ç”¨ï¼šAPIå“åº”å¤„ç†
function createUserResponse(user) {
  const { id, name, email } = user;
  return {
    id,
    name,
    email,
    timestamp: Date.now(),
  };
}
```

**Object.assign() - å¯¹è±¡åˆå¹¶**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº†å¯¹è±¡æµ…æ‹·è´å’Œåˆå¹¶çš„é—®é¢˜ï¼Œè®©å¯¹è±¡æ“ä½œæ›´åŠ ä¾¿æ·ã€‚

```javascript
// è¯­æ³•ï¼šObject.assign(target, ...sources)
// å‚æ•°ï¼šç›®æ ‡å¯¹è±¡, æºå¯¹è±¡åˆ—è¡¨
// è¿”å›å€¼ï¼šç›®æ ‡å¯¹è±¡

const target = { a: 1, b: 2 };
const source1 = { b: 3, c: 4 };
const source2 = { c: 5, d: 6 };

const result = Object.assign(target, source1, source2);
console.log(result); // {a: 1, b: 3, c: 5, d: 6}
console.log(target); // {a: 1, b: 3, c: 5, d: 6} (è¢«ä¿®æ”¹)

// å®é™…åº”ç”¨ï¼šå¯¹è±¡åˆå¹¶
function mergeConfig(defaultConfig, userConfig) {
  return Object.assign({}, defaultConfig, userConfig);
}

// å®é™…åº”ç”¨ï¼šå¯¹è±¡å…‹éš†
function shallowClone(obj) {
  return Object.assign({}, obj);
}
```

---

## ES2017 æ—¶ä»£ï¼ˆ2017 å¹´ï¼‰

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šES2017 å¼•å…¥äº† Object.entries() å’Œ Object.values()ï¼Œè§£å†³äº†å¯¹è±¡éå†å’Œè½¬æ¢çš„é—®é¢˜ï¼Œè®©å¯¹è±¡æ“ä½œæ›´åŠ ç»Ÿä¸€ã€‚

### ğŸ“ ES2017 å¯¹è±¡æ–¹æ³•æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | æ–¹æ³•           | è¯­æ³•                  | å‚æ•° | è¿”å›å€¼ | ç”¨é€”       |
| -------- | -------------- | --------------------- | ---- | ------ | ---------- |
| **éå†** | Object.entries | `Object.entries(obj)` | å¯¹è±¡ | æ•°ç»„   | è·å–é”®å€¼å¯¹ |
| **éå†** | Object.values  | `Object.values(obj)`  | å¯¹è±¡ | æ•°ç»„   | è·å–å€¼æ•°ç»„ |

### ğŸ”§ ES2017 è¯¦ç»†æ–¹æ³•è¯´æ˜

**Object.entries() - è·å–é”®å€¼å¯¹**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº†å¯¹è±¡éå†çš„é—®é¢˜ï¼Œè®©å¯¹è±¡æ“ä½œæ›´åŠ ç»Ÿä¸€ï¼Œé…åˆæ•°ç»„æ–¹æ³•ä½¿ç”¨ã€‚

```javascript
// è¯­æ³•ï¼šObject.entries(obj)
// å‚æ•°ï¼šå¯¹è±¡
// è¿”å›å€¼ï¼šé”®å€¼å¯¹æ•°ç»„

const person = {
  name: "å¼ ä¸‰",
  age: 25,
  city: "åŒ—äº¬",
};

console.log(Object.entries(person));
// [["name", "å¼ ä¸‰"], ["age", 25], ["city", "åŒ—äº¬"]]

// å®é™…åº”ç”¨ï¼šå¯¹è±¡éå†
Object.entries(person).forEach(([key, value]) => {
  console.log(`${key}: ${value}`);
});

// å®é™…åº”ç”¨ï¼šå¯¹è±¡è¿‡æ»¤
function filterObject(obj, predicate) {
  return Object.fromEntries(
    Object.entries(obj).filter(([key, value]) => predicate(key, value))
  );
}
```

**Object.values() - è·å–å€¼æ•°ç»„**

```javascript
// è¯­æ³•ï¼šObject.values(obj)
// å‚æ•°ï¼šå¯¹è±¡
// è¿”å›å€¼ï¼šå€¼æ•°ç»„

const person = {
  name: "å¼ ä¸‰",
  age: 25,
  city: "åŒ—äº¬",
};

console.log(Object.values(person)); // ["å¼ ä¸‰", 25, "åŒ—äº¬"]

// å®é™…åº”ç”¨ï¼šå€¼ç»Ÿè®¡
function getObjectStats(obj) {
  const values = Object.values(obj);
  return {
    count: values.length,
    types: [...new Set(values.map((v) => typeof v))],
    hasNumbers: values.some((v) => typeof v === "number"),
  };
}
```

---

## ES2018 æ—¶ä»£ï¼ˆ2018 å¹´ï¼‰

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šES2018 å¼•å…¥äº† Object.getOwnPropertyDescriptors()ï¼Œè§£å†³äº†å¯¹è±¡å±æ€§æè¿°ç¬¦è·å–çš„é—®é¢˜ï¼Œè®©å¯¹è±¡æ“ä½œæ›´åŠ ç²¾ç»†ã€‚

### ğŸ“ ES2018 å¯¹è±¡æ–¹æ³•æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | æ–¹æ³•                      | è¯­æ³•                                    | å‚æ•° | è¿”å›å€¼ | ç”¨é€”               |
| -------- | ------------------------- | --------------------------------------- | ---- | ------ | ------------------ |
| **è·å–** | getOwnPropertyDescriptors | `Object.getOwnPropertyDescriptors(obj)` | å¯¹è±¡ | å¯¹è±¡   | è·å–æ‰€æœ‰å±æ€§æè¿°ç¬¦ |

### ğŸ”§ ES2018 è¯¦ç»†æ–¹æ³•è¯´æ˜

**Object.getOwnPropertyDescriptors() - è·å–æ‰€æœ‰å±æ€§æè¿°ç¬¦**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº†æ‰¹é‡è·å–å¯¹è±¡å±æ€§æè¿°ç¬¦çš„é—®é¢˜ï¼Œè®©å¯¹è±¡æ“ä½œæ›´åŠ ç²¾ç»†ã€‚

```javascript
// è¯­æ³•ï¼šObject.getOwnPropertyDescriptors(obj)
// å‚æ•°ï¼šå¯¹è±¡
// è¿”å›å€¼ï¼šå±æ€§æè¿°ç¬¦å¯¹è±¡

const obj = {};
Object.defineProperty(obj, "name", {
  value: "å¼ ä¸‰",
  writable: false,
  enumerable: true,
  configurable: false,
});

console.log(Object.getOwnPropertyDescriptors(obj));
// {
//   name: {
//     value: 'å¼ ä¸‰',
//     writable: false,
//     enumerable: true,
//     configurable: false
//   }
// }

// å®é™…åº”ç”¨ï¼šå¯¹è±¡å…‹éš†ï¼ˆåŒ…æ‹¬å±æ€§æè¿°ç¬¦ï¼‰
function cloneObject(obj) {
  return Object.create(
    Object.getPrototypeOf(obj),
    Object.getOwnPropertyDescriptors(obj)
  );
}
```

---

## ES2019 æ—¶ä»£ï¼ˆ2019 å¹´ï¼‰

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šES2019 å¼•å…¥äº† Object.fromEntries()ï¼Œè§£å†³äº†æ•°ç»„è½¬å¯¹è±¡çš„é—®é¢˜ï¼Œè®©å¯¹è±¡æ“ä½œæ›´åŠ ä¾¿æ·ã€‚

### ğŸ“ ES2019 å¯¹è±¡æ–¹æ³•æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | æ–¹æ³•        | è¯­æ³•                          | å‚æ•°       | è¿”å›å€¼ | ç”¨é€”       |
| -------- | ----------- | ----------------------------- | ---------- | ------ | ---------- |
| **è½¬æ¢** | fromEntries | `Object.fromEntries(entries)` | é”®å€¼å¯¹æ•°ç»„ | å¯¹è±¡   | æ•°ç»„è½¬å¯¹è±¡ |

### ğŸ”§ ES2019 è¯¦ç»†æ–¹æ³•è¯´æ˜

**Object.fromEntries() - æ•°ç»„è½¬å¯¹è±¡**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº†æ•°ç»„è½¬å¯¹è±¡çš„é—®é¢˜ï¼Œè®©å¯¹è±¡æ“ä½œæ›´åŠ ä¾¿æ·ï¼Œä¸ Object.entries() å½¢æˆå®Œç¾é…å¯¹ã€‚

```javascript
// è¯­æ³•ï¼šObject.fromEntries(entries)
// å‚æ•°ï¼šé”®å€¼å¯¹æ•°ç»„
// è¿”å›å€¼ï¼šå¯¹è±¡

const entries = [
  ["name", "å¼ ä¸‰"],
  ["age", 25],
  ["city", "åŒ—äº¬"],
];

const obj = Object.fromEntries(entries);
console.log(obj); // {name: "å¼ ä¸‰", age: 25, city: "åŒ—äº¬"}

// å®é™…åº”ç”¨ï¼šMapè½¬å¯¹è±¡
const map = new Map([
  ["name", "å¼ ä¸‰"],
  ["age", 25],
]);
const objFromMap = Object.fromEntries(map);

// å®é™…åº”ç”¨ï¼šå¯¹è±¡è½¬æ¢
function transformObject(obj, transformer) {
  return Object.fromEntries(
    Object.entries(obj).map(([key, value]) => transformer(key, value))
  );
}
```

---

## ES2022 æ—¶ä»£ï¼ˆ2022 å¹´ï¼‰

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šES2022 å¼•å…¥äº† Object.hasOwn()ï¼Œè§£å†³äº† hasOwnProperty() çš„é—®é¢˜ï¼Œè®©å±æ€§æ£€æŸ¥æ›´åŠ å¯é ã€‚

### ğŸ“ ES2022 å¯¹è±¡æ–¹æ³•æ€»è§ˆ

| åŠŸèƒ½åˆ†ç±» | æ–¹æ³•   | è¯­æ³•                       | å‚æ•°      | è¿”å›å€¼ | ç”¨é€”         |
| -------- | ------ | -------------------------- | --------- | ------ | ------------ |
| **æ£€æŸ¥** | hasOwn | `Object.hasOwn(obj, prop)` | å¯¹è±¡,å±æ€§ | å¸ƒå°”å€¼ | æ£€æŸ¥è‡ªæœ‰å±æ€§ |

### ğŸ”§ ES2022 è¯¦ç»†æ–¹æ³•è¯´æ˜

**Object.hasOwn() - æ£€æŸ¥è‡ªæœ‰å±æ€§**

> **ğŸ¯ è§£å†³çš„é—®é¢˜**ï¼šè§£å†³äº† hasOwnProperty() å¯èƒ½è¢«è¦†ç›–çš„é—®é¢˜ï¼Œè®©å±æ€§æ£€æŸ¥æ›´åŠ å¯é ã€‚

```javascript
// è¯­æ³•ï¼šObject.hasOwn(obj, prop)
// å‚æ•°ï¼šå¯¹è±¡, å±æ€§å
// è¿”å›å€¼ï¼šå¸ƒå°”å€¼

const obj = {
  name: "å¼ ä¸‰",
  age: 25,
};

console.log(Object.hasOwn(obj, "name")); // true
console.log(Object.hasOwn(obj, "toString")); // false

// å¯¹æ¯” hasOwnProperty
const objWithOverridden = {
  hasOwnProperty: "not a function",
};

// ä¼šæŠ¥é”™
// objWithOverridden.hasOwnProperty("name");

// å®‰å…¨ä½¿ç”¨
console.log(Object.hasOwn(objWithOverridden, "name")); // false

// å®é™…åº”ç”¨ï¼šå®‰å…¨çš„å±æ€§æ£€æŸ¥
function safeHasProperty(obj, prop) {
  return Object.hasOwn(obj, prop);
}
```

---

## å®é™…åº”ç”¨åœºæ™¯

### 1. å¯¹è±¡åˆå¹¶å’Œå…‹éš†åœºæ™¯

**æ·±åº¦åˆå¹¶å¯¹è±¡**

```javascript
// æµ…åˆå¹¶
function shallowMerge(target, ...sources) {
  return Object.assign({}, target, ...sources);
}

// æ·±åˆå¹¶
function deepMerge(target, ...sources) {
  if (!sources.length) return target;
  const source = sources.shift();

  if (isObject(target) && isObject(source)) {
    for (const key in source) {
      if (isObject(source[key])) {
        if (!target[key]) Object.assign(target, { [key]: {} });
        deepMerge(target[key], source[key]);
      } else {
        Object.assign(target, { [key]: source[key] });
      }
    }
  }

  return deepMerge(target, ...sources);
}

function isObject(item) {
  return item && typeof item === "object" && !Array.isArray(item);
}

// å®é™…åº”ç”¨ï¼šé…ç½®åˆå¹¶
const defaultConfig = {
  api: {
    baseUrl: "https://api.example.com",
    timeout: 5000,
  },
  ui: {
    theme: "light",
    language: "zh-CN",
  },
};

const userConfig = {
  api: {
    timeout: 10000,
  },
  ui: {
    theme: "dark",
  },
};

const finalConfig = deepMerge(defaultConfig, userConfig);
```

### 2. å¯¹è±¡è½¬æ¢åœºæ™¯

**å¯¹è±¡æ ¼å¼è½¬æ¢**

```javascript
// å¯¹è±¡è½¬æ•°ç»„
function objectToArray(obj) {
  return Object.entries(obj).map(([key, value]) => ({
    key,
    value,
    type: typeof value,
  }));
}

// æ•°ç»„è½¬å¯¹è±¡
function arrayToObject(arr, keyField, valueField) {
  return Object.fromEntries(
    arr.map((item) => [item[keyField], item[valueField]])
  );
}

// å®é™…åº”ç”¨ï¼šæ•°æ®è½¬æ¢
const users = [
  { id: 1, name: "å¼ ä¸‰", age: 25 },
  { id: 2, name: "æå››", age: 30 },
];

const userMap = arrayToObject(users, "id", "name");
console.log(userMap); // {1: 'å¼ ä¸‰', 2: 'æå››'}
```

### 3. å¯¹è±¡éªŒè¯åœºæ™¯

**å¯¹è±¡å±æ€§éªŒè¯**

```javascript
function validateObject(obj, schema) {
  const errors = [];

  for (const [key, rules] of Object.entries(schema)) {
    const value = obj[key];

    if (rules.required && (value === undefined || value === null)) {
      errors.push(`${key} is required`);
      continue;
    }

    if (value !== undefined && rules.type && typeof value !== rules.type) {
      errors.push(`${key} must be of type ${rules.type}`);
    }

    if (value !== undefined && rules.min && value < rules.min) {
      errors.push(`${key} must be at least ${rules.min}`);
    }

    if (value !== undefined && rules.max && value > rules.max) {
      errors.push(`${key} must be at most ${rules.max}`);
    }
  }

  return {
    isValid: errors.length === 0,
    errors,
  };
}

// å®é™…åº”ç”¨ï¼šè¡¨å•éªŒè¯
const userSchema = {
  name: { required: true, type: "string" },
  age: { required: true, type: "number", min: 0, max: 150 },
  email: { required: true, type: "string" },
};

const user = { name: "å¼ ä¸‰", age: 25, email: "zhangsan@example.com" };
const validation = validateObject(user, userSchema);
```

---

## æ€§èƒ½å¯¹æ¯”ä¸æœ€ä½³å®è·µ

### 1. å¯¹è±¡åˆ›å»ºæ€§èƒ½å¯¹æ¯”

```javascript
// æ€§èƒ½æµ‹è¯•
function performanceTest() {
  const iterations = 1000000;

  // å¯¹è±¡å­—é¢é‡
  console.time("å¯¹è±¡å­—é¢é‡");
  for (let i = 0; i < iterations; i++) {
    const obj = { a: 1, b: 2, c: 3 };
  }
  console.timeEnd("å¯¹è±¡å­—é¢é‡");

  // Object.create
  console.time("Object.create");
  for (let i = 0; i < iterations; i++) {
    const obj = Object.create(null);
    obj.a = 1;
    obj.b = 2;
    obj.c = 3;
  }
  console.timeEnd("Object.create");

  // Object.assign
  console.time("Object.assign");
  for (let i = 0; i < iterations; i++) {
    const obj = Object.assign({}, { a: 1, b: 2, c: 3 });
  }
  console.timeEnd("Object.assign");
}

// å…¸å‹ç»“æœï¼šå¯¹è±¡å­—é¢é‡ > Object.assign > Object.create
```

### 2. æœ€ä½³å®è·µå»ºè®®

**å¯¹è±¡æ“ä½œæœ€ä½³å®è·µï¼š**

```javascript
// âœ… æ¨èï¼šä½¿ç”¨å¯¹è±¡è§£æ„
const { name, age } = user;

// âœ… æ¨èï¼šä½¿ç”¨å±æ€§ç®€å†™
const user = { name, age };

// âœ… æ¨èï¼šä½¿ç”¨ Object.hasOwn() è€Œä¸æ˜¯ hasOwnProperty()
if (Object.hasOwn(obj, "property")) {
  // å¤„ç†é€»è¾‘
}

// âœ… æ¨èï¼šä½¿ç”¨ Object.entries() è¿›è¡Œå¯¹è±¡éå†
Object.entries(obj).forEach(([key, value]) => {
  console.log(key, value);
});

// âœ… æ¨èï¼šä½¿ç”¨ Object.fromEntries() è¿›è¡Œå¯¹è±¡è½¬æ¢
const newObj = Object.fromEntries(
  Object.entries(obj).map(([key, value]) => [key, value * 2])
);

// âŒ é¿å…ï¼šç›´æ¥ä¿®æ”¹åŸå¯¹è±¡
// ä¸å¥½çš„åšæ³•
function badMerge(target, source) {
  Object.assign(target, source);
  return target;
}

// âœ… å¥½çš„åšæ³•
function goodMerge(target, source) {
  return Object.assign({}, target, source);
}
```

---

## é¢è¯•å¸¸è€ƒç®—æ³•

### 1. æ·±æ‹·è´å®ç°

```javascript
// æ–¹æ³•1ï¼šJSONæ–¹æ³•ï¼ˆæœ‰é™åˆ¶ï¼‰
function deepClone1(obj) {
  return JSON.parse(JSON.stringify(obj));
}

// æ–¹æ³•2ï¼šé€’å½’å®ç°
function deepClone2(obj) {
  if (obj === null || typeof obj !== "object") {
    return obj;
  }

  if (obj instanceof Date) {
    return new Date(obj.getTime());
  }

  if (obj instanceof Array) {
    return obj.map((item) => deepClone2(item));
  }

  if (typeof obj === "object") {
    const cloned = {};
    for (const key in obj) {
      if (obj.hasOwnProperty(key)) {
        cloned[key] = deepClone2(obj[key]);
      }
    }
    return cloned;
  }
}

// æ–¹æ³•3ï¼šä½¿ç”¨ Map å¤„ç†å¾ªç¯å¼•ç”¨
function deepClone3(obj, map = new Map()) {
  if (obj === null || typeof obj !== "object") {
    return obj;
  }

  if (map.has(obj)) {
    return map.get(obj);
  }

  const cloned = Array.isArray(obj) ? [] : {};
  map.set(obj, cloned);

  for (const key in obj) {
    if (Object.hasOwn(obj, key)) {
      cloned[key] = deepClone3(obj[key], map);
    }
  }

  return cloned;
}
```

### 2. å¯¹è±¡æ¯”è¾ƒ

```javascript
function deepEqual(obj1, obj2) {
  if (obj1 === obj2) return true;

  if (obj1 == null || obj2 == null) return false;

  if (typeof obj1 !== typeof obj2) return false;

  if (typeof obj1 !== "object") return obj1 === obj2;

  const keys1 = Object.keys(obj1);
  const keys2 = Object.keys(obj2);

  if (keys1.length !== keys2.length) return false;

  for (const key of keys1) {
    if (!keys2.includes(key)) return false;
    if (!deepEqual(obj1[key], obj2[key])) return false;
  }

  return true;
}

// æµ‹è¯•
const obj1 = { a: 1, b: { c: 2 } };
const obj2 = { a: 1, b: { c: 2 } };
const obj3 = { a: 1, b: { c: 3 } };

console.log(deepEqual(obj1, obj2)); // true
console.log(deepEqual(obj1, obj3)); // false
```

### 3. å¯¹è±¡æ‰å¹³åŒ–

```javascript
function flattenObject(obj, prefix = "") {
  const flattened = {};

  for (const key in obj) {
    if (Object.hasOwn(obj, key)) {
      const newKey = prefix ? `${prefix}.${key}` : key;

      if (
        typeof obj[key] === "object" &&
        obj[key] !== null &&
        !Array.isArray(obj[key])
      ) {
        Object.assign(flattened, flattenObject(obj[key], newKey));
      } else {
        flattened[newKey] = obj[key];
      }
    }
  }

  return flattened;
}

// æµ‹è¯•
const nested = {
  user: {
    name: "å¼ ä¸‰",
    address: {
      city: "åŒ—äº¬",
      district: "æœé˜³åŒº",
    },
  },
  age: 25,
};

console.log(flattenObject(nested));
// {user.name: 'å¼ ä¸‰', user.address.city: 'åŒ—äº¬', user.address.district: 'æœé˜³åŒº', age: 25}
```

### 4. å¯¹è±¡å»é‡

```javascript
function uniqueObjects(arr, key) {
  const seen = new Set();
  return arr.filter((obj) => {
    const value = obj[key];
    if (seen.has(value)) {
      return false;
    }
    seen.add(value);
    return true;
  });
}

// æµ‹è¯•
const users = [
  { id: 1, name: "å¼ ä¸‰" },
  { id: 2, name: "æå››" },
  { id: 1, name: "å¼ ä¸‰" },
  { id: 3, name: "ç‹äº”" },
];

console.log(uniqueObjects(users, "id"));
// [{id: 1, name: 'å¼ ä¸‰'}, {id: 2, name: 'æå››'}, {id: 3, name: 'ç‹äº”'}]
```

---

## ğŸ“‹ æ€»ç»“

### è®°å¿†æŠ€å·§

1. **åˆ†ç±»è®°å¿†**ï¼šæŒ‰åŠŸèƒ½åˆ†ç±»ï¼ˆåˆ›å»ºã€è®¿é—®ã€ä¿®æ”¹ã€æ£€æŸ¥ã€è½¬æ¢ï¼‰
2. **å¯¹æ¯”è®°å¿†**ï¼šæ–°æ—§æ–¹æ³•çš„åŒºåˆ«
3. **é…å¯¹è®°å¿†**ï¼šObject.entries() å’Œ Object.fromEntries()
4. **å®‰å…¨è®°å¿†**ï¼šä½¿ç”¨ Object.hasOwn() è€Œä¸æ˜¯ hasOwnProperty()
5. **ç°ä»£è®°å¿†**ï¼šä¼˜å…ˆä½¿ç”¨ ES6+ æ–¹æ³•

### ä½¿ç”¨å»ºè®®

1. **ä¼˜å…ˆä½¿ç”¨ ES6+æ–¹æ³•**ï¼šæ›´ç®€æ´ã€æ›´å®‰å…¨
2. **æ³¨æ„æ·±æµ…æ‹·è´**ï¼šé€‰æ‹©åˆé€‚çš„æ‹·è´æ–¹å¼
3. **ä½¿ç”¨è§£æ„èµ‹å€¼**ï¼šç®€åŒ–å¯¹è±¡æ“ä½œ
4. **æ³¨æ„æ€§èƒ½å·®å¼‚**ï¼šé€‰æ‹©åˆé€‚çš„æ–¹æ³•
5. **å¤„ç†å¾ªç¯å¼•ç”¨**ï¼šä½¿ç”¨ Map æˆ– WeakMap
