## 一、渲染性能优化

### 1. 首屏加载优化 🔥

**一句话回答**
减少首屏资源体积、提高关键资源加载优先级、利用缓存与预渲染。

**要点**

- 代码分割。
- 懒加载。
- Critical CSS。
- CDN 缓存。

**详细回答**

- 首屏优化目标是 **首屏可交互时间 (TTI)** 和 **LCP**。
- 按路由代码分割，减少 bundle。
- 关键 CSS 内联，非关键样式延迟加载。
- 图片懒加载 + CDN 分发。

**扩展/对比**

- 面试官常问：“如何度量首屏性能？” 👉 Lighthouse、Web Vitals。

---

### 2. 虚拟滚动的实现原理 🔥

**一句话回答**
虚拟滚动通过只渲染可见区域的元素，减少 DOM 数量。

**要点**

- 可见区域计算。
- 占位符高度。
- 滚动时动态渲染。

**详细回答**

- 给列表设置固定高度。
- 根据滚动位置计算需要渲染的索引范围。
- 用空白占位元素保持整体高度。

**扩展/对比**

- 面试官可能让你写简易虚拟列表。
- 常见库：react-window、react-virtualized。

---

### 3. 回流与重绘优化

**一句话回答**
减少不必要的回流与重绘，批量修改 DOM，使用 transform/opacity。

**要点**

- 避免频繁操作 DOM。
- requestAnimationFrame。
- CSS3 transform 替代定位。

**详细回答**

- 批量 DOM 修改时用 DocumentFragment。
- 动画尽量使用 `transform`，避免触发回流。

**扩展/对比**

- 面试官可能问：“为什么 transform 性能好？” 👉 它只影响合成层。

---

### 4. 图片优化策略 🔥

**一句话回答**
压缩、懒加载、响应式加载、CDN。

**要点**

- WebP/AVIF 格式。
- srcset/picture。
- loading="lazy"。

**详细回答**

```html
<picture>
  <source srcset="img.avif" type="image/avif" />
  <source srcset="img.webp" type="image/webp" />
  <img src="img.jpg" loading="lazy" />
</picture>
```

**扩展/对比**

- 面试官常问：“next/image 优化了什么？” 👉 自动压缩、懒加载、响应式。

---

## 二、数据与缓存优化

### 5. 前端缓存策略 🔥

**一句话回答**
前端缓存分为 HTTP 缓存（强缓存/协商缓存）和本地缓存（localStorage、IndexedDB）。

**要点**

- 强缓存：Expires/Cache-Control。
- 协商缓存：ETag/Last-Modified。
- 本地缓存：localStorage、IndexedDB。

**详细回答**

- 静态资源设置 `Cache-Control: max-age=31536000`。
- 动态接口用 ETag 协商缓存。

**扩展/对比**

- 面试官可能问：“ETag 和 Last-Modified 区别？” 👉 精度不同。

---

### 6. CDN 的作用

**一句话回答**
CDN 通过分布式节点缓存资源，减少延迟和带宽压力。

**要点**

- 就近访问。
- 减少源站压力。
- 边缘缓存。

**详细回答**

- 静态资源部署到 CDN，提高加载速度。
- 可结合 HTTP 缓存策略使用。

**扩展/对比**

- 面试官可能问：“动态数据能用 CDN 吗？” 👉 边缘计算/边缘缓存。

---

### 7. Service Worker 的应用 🔥

**一句话回答**
Service Worker 可拦截请求，实现离线缓存与 PWA 功能。

**要点**

- 离线缓存。
- 背景同步。
- 推送通知。

**详细回答**

```js
self.addEventListener("fetch", (e) => {
  e.respondWith(caches.match(e.request));
});
```

**扩展/对比**

- 面试官可能问：“Service Worker 和 localStorage 区别？” 👉 SW 在 worker 线程拦截请求。

---

## 三、大规模项目实践

### 8. 如何优化大规模 React 项目性能 🔥

**一句话回答**
组件拆分、memo 缓存、懒加载、避免重复渲染。

**要点**

- React.memo。
- useMemo/useCallback。
- 拆分大组件。
- Suspense + lazy。

**详细回答**

- 避免匿名函数/内联对象。
- 使用 key 稳定性避免重复渲染。
- 大表格可用虚拟滚动。

**扩展/对比**

- 面试官可能问：“React.memo 和 useMemo 区别？” 👉 一个缓存组件，一个缓存值。

---

### 9. 如何优化前端构建速度

**一句话回答**
利用缓存、并行化、按需编译。

**要点**

- HMR。
- Babel 缓存。
- ESBuild/Swc 替代 Terser。

**详细回答**

- Vite/Esbuild 提升冷启动。
- Turborepo 缓存任务结果。

**扩展/对比**

- 面试官可能问：“pnpm 为什么比 npm 快？” 👉 硬链接 + 去重。

---

### 10. 如何保障大规模项目可维护性 🔥

**一句话回答**
通过模块化、类型系统、Lint 规则、测试保障可维护性。

**要点**

- TypeScript。
- 单元测试。
- Monorepo。
- 规范（BEM、ESLint）。

**详细回答**

- TS 提供类型安全。
- Jest + React Testing Library 做测试。
- Monorepo 统一依赖和版本。

**扩展/对比**

- 面试官可能问：“你们项目如何避免技术债？” 👉 Code Review + 自动化工具。

---
