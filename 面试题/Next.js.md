# ğŸ“˜ Next.js é«˜é¢‘é¢è¯•é¢˜ Â· å…¨å±•å¼€ç‰ˆï¼ˆ2025 ä¸­å›½å‰ç«¯ä¸“ç”¨ï¼‰

## ä¸€ã€åŸºç¡€ä¸æ ¸å¿ƒæ¦‚å¿µ

### 1. ä»€ä¹ˆæ˜¯ Next.jsï¼Ÿç›¸æ¯” CRA çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ ğŸ”¥

**ä¸€å¥è¯å›ç­”**
Next.js æ˜¯åŸºäº React çš„å…¨æ ˆæ¡†æ¶ï¼Œæ”¯æŒ SSR/SSG/ISRï¼Œå†…ç½®è·¯ç”±ä¸ä¼˜åŒ–ï¼Œæ¯” CRA æ›´é€‚åˆç”Ÿäº§ç¯å¢ƒã€‚

**è¦ç‚¹**

- åŸºäº Reactã€‚
- æ”¯æŒ SSR / SSG / ISRã€‚
- å†…ç½®è·¯ç”±ã€APIã€æ€§èƒ½ä¼˜åŒ–ã€‚
- CRA ä»… CSRã€‚

**è¯¦ç»†å›ç­”**
CRA (create-react-app) åªæ”¯æŒ CSRï¼ˆå®¢æˆ·ç«¯æ¸²æŸ“ï¼‰ï¼Œé¦–å±æ…¢ä¸”ä¸åˆ© SEOã€‚
Next.js åœ¨ React åŸºç¡€ä¸Šæ‰©å±•äº†ï¼š

- **æ¸²æŸ“æ¨¡å¼å¤šæ ·**ï¼šæ”¯æŒ CSR / SSR / SSG / ISRã€‚
- **è·¯ç”±**ï¼šåŸºäºæ–‡ä»¶ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆã€‚
- **API Routes**ï¼šå†…ç½®åç«¯èƒ½åŠ›ã€‚
- **ä¼˜åŒ–**ï¼šä»£ç åˆ†å‰²ã€å›¾ç‰‡ä¼˜åŒ–ã€å­—ä½“ä¼˜åŒ–ã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¸¸é—®ï¼šâ€œä½ ä¸ºä»€ä¹ˆç”¨ Next.jsï¼Ÿâ€ ğŸ‘‰ å›ç­”å¯ç»“åˆå®é™…ï¼šSEO éœ€æ±‚ã€æ€§èƒ½ä¼˜åŒ–ã€SSR æ”¯æŒã€‚

---

### 2. CSRã€SSRã€SSGã€ISR çš„åŒºåˆ«ä¸é€‚ç”¨åœºæ™¯ ğŸ”¥

**ä¸€å¥è¯å›ç­”**
CSR å…¨é å‰ç«¯æ¸²æŸ“ï¼ŒSSR æœåŠ¡ç«¯å®æ—¶æ¸²æŸ“ï¼ŒSSG æ„å»ºæ—¶é™æ€åŒ–ï¼ŒISR é™æ€ç”Ÿæˆ+å®šæœŸæ›´æ–°ã€‚

**è¦ç‚¹**

- CSRï¼šé¦–å±æ…¢ï¼Œäº¤äº’å¿«ã€‚
- SSRï¼šé¦–å±å¿«ï¼ŒSEO å¥½ï¼ŒæœåŠ¡å™¨å‹åŠ›å¤§ã€‚
- SSGï¼šæ€§èƒ½æœ€ä½³ï¼Œé€‚åˆé™æ€å†…å®¹ã€‚
- ISRï¼šé™æ€ç”Ÿæˆ + å®šæ—¶åˆ·æ–°ã€‚

**è¯¦ç»†å›ç­”**

- CSRï¼šçº¯å‰ç«¯æ¸²æŸ“ï¼Œé€‚åˆå†…éƒ¨ç³»ç»Ÿã€‚
- SSRï¼šæ¯æ¬¡è¯·æ±‚éƒ½æœåŠ¡ç«¯æ¸²æŸ“ï¼Œé€‚åˆæ–°é—»ç±»é¡µé¢ã€‚
- SSGï¼šæ„å»ºæ—¶ç”Ÿæˆé™æ€ HTMLï¼Œé€‚åˆåšå®¢/æ–‡æ¡£ã€‚
- ISRï¼šåŸºäº revalidate å®šæœŸæ›´æ–°ï¼Œé€‚åˆç”µå•†/å†…å®¹ç½‘ç«™ã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¸¸é—®ï¼šâ€œå¦‚æœæ˜¯å•†å“è¯¦æƒ…é¡µä½ ä¼šé€‰ä»€ä¹ˆï¼Ÿâ€ ğŸ‘‰ ISRï¼ˆå…¼é¡¾ SEO å’ŒåŠ¨æ€æ€§ï¼‰ã€‚

---

### 3. Next.js ä¸­çš„ç›®å½•ç»“æ„ï¼ˆpages/ vs app/ï¼‰åŒºåˆ«

**ä¸€å¥è¯å›ç­”**
pages/ æ˜¯æ—§è·¯ç”±ç³»ç»Ÿï¼Œapp/ æ˜¯æ–° App Routerï¼Œæ”¯æŒ RSC å’Œ Server Actionsã€‚

**è¦ç‚¹**

- pages/ï¼šåŸºäºæ–‡ä»¶ç³»ç»Ÿï¼Œæ”¯æŒ getServerSidePropsã€‚
- app/ï¼šæ”¯æŒ Server Componentsã€å¹¶å‘ç‰¹æ€§ã€‚
- app/ é»˜è®¤åŸºäº React 18 ç‰¹æ€§ã€‚

**è¯¦ç»†å›ç­”**

- **pages/**ï¼šä¼ ç»Ÿè·¯ç”±ï¼Œæ•°æ®è·å–ä¾èµ– getServerSideProps/getStaticPropsã€‚
- **app/**ï¼šå¼•å…¥ React Server Componentsï¼Œæ”¯æŒ server-only é€»è¾‘ã€`generateMetadata`ã€`useServerAction`ã€‚

**æ‰©å±•/å¯¹æ¯”**

- 2025 é¢è¯•æ›´å€¾å‘é—® App Routerï¼Œè€é¡¹ç›®è¿˜åœ¨ç”¨ pagesã€‚

---

### 4. ä»€ä¹ˆæ˜¯ App Routerï¼Ÿä¸ºä»€ä¹ˆè¿ç§»ï¼Ÿ ğŸ”¥

**ä¸€å¥è¯å›ç­”**
App Router åŸºäº React Server Componentsï¼Œæä¾›æ›´å¼ºçš„æ•°æ®è·å–å’Œä¼˜åŒ–èƒ½åŠ›ï¼Œæ˜¯æœªæ¥æ–¹å‘ã€‚

**è¦ç‚¹**

- Server Componentsã€‚
- å¹¶å‘æ¸²æŸ“ã€‚
- æ•°æ®è·å–ç®€åŒ–ã€‚
- SEO å‹å¥½ã€‚

**è¯¦ç»†å›ç­”**
App Router æä¾›ï¼š

- Server Componentsï¼šå‡å°‘å®¢æˆ·ç«¯ JS ä½“ç§¯ã€‚
- Layout & Nested Routingï¼šæ”¯æŒåµŒå¥—å¸ƒå±€ã€‚
- Server Actionsï¼šç›´æ¥è°ƒç”¨åç«¯å‡½æ•°ã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¸¸é—®ï¼šâ€œä¸ºä»€ä¹ˆ App Router æ¯” pages å¥½ï¼Ÿâ€ ğŸ‘‰ æ›´å¥½çš„æ€§èƒ½ã€å†…ç½®æ•°æ®è·å–ã€SEOã€‚

---

### 5. React Server Components (RSC) åœ¨ Next.js ä¸­çš„ä½œç”¨ ğŸ”¥

**ä¸€å¥è¯å›ç­”**
RSC å…è®¸éƒ¨åˆ†ç»„ä»¶åœ¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå‡å°‘å®¢æˆ·ç«¯ JS ä½“ç§¯ï¼Œæé«˜æ€§èƒ½ã€‚

**è¦ç‚¹**

- æœåŠ¡ç«¯æ‰§è¡Œï¼Œä¸æ‰“åŒ…åˆ°å®¢æˆ·ç«¯ã€‚
- å®¢æˆ·ç«¯ä»…æ¥æ”¶æ¸²æŸ“ç»“æœã€‚
- ç»“åˆ Suspense å®ç°æµå¼æ¸²æŸ“ã€‚

**è¯¦ç»†å›ç­”**

- RSC è®©å¼€å‘è€…å†™çš„ç»„ä»¶å¯ä»¥æ˜¯ **server-only** æˆ– **client-only**ã€‚
- é»˜è®¤æ˜¯ Server Componentï¼Œåªæœ‰åŠ  `"use client"` æ‰ä¼šè¢«æ‰“åŒ…åˆ°å‰ç«¯ã€‚
- é¿å…äº†å¾ˆå¤šä¸å¿…è¦çš„å®¢æˆ·ç«¯ bundleã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¸¸é—®ï¼šâ€œRSC å’Œ SSR çš„åŒºåˆ«ï¼Ÿâ€ ğŸ‘‰ RSC åœ¨æœåŠ¡ç«¯æ‰§è¡Œé€»è¾‘ï¼ŒSSR æ˜¯è¾“å‡º HTMLï¼ŒäºŒè€…å¯ç»“åˆã€‚

---

# äºŒã€æ•°æ®è·å–

### 6. `getServerSideProps` vs `getStaticProps` vs `getStaticPaths` ğŸ”¥

**ä¸€å¥è¯å›ç­”**
`getServerSideProps` æ¯æ¬¡è¯·æ±‚è¿è¡Œï¼Œ`getStaticProps` æ„å»ºæ—¶è¿è¡Œï¼Œ`getStaticPaths` ç”¨äºç”ŸæˆåŠ¨æ€é™æ€è·¯ç”±ã€‚

**è¦ç‚¹**

- getServerSidePropsï¼šè¯·æ±‚æ—¶è¿è¡Œï¼ŒSSRã€‚
- getStaticPropsï¼šæ„å»ºæ—¶è¿è¡Œï¼ŒSSGã€‚
- getStaticPathsï¼šé…åˆ SSG åŠ¨æ€è·¯ç”±ã€‚

**è¯¦ç»†å›ç­”**

- `getServerSideProps`ï¼šå®æ—¶è·å–æ•°æ®ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½è°ƒç”¨ã€‚
- `getStaticProps`ï¼šæ„å»ºæ—¶è°ƒç”¨ï¼Œç”Ÿæˆé™æ€ HTMLã€‚
- `getStaticPaths`ï¼šæŒ‡å®šåŠ¨æ€è·¯å¾„å‚æ•°ï¼Œç”Ÿæˆå¯¹åº”é¡µé¢ã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¸¸é—®ï¼šâ€œç”µå•†å•†å“è¯¦æƒ…é¡µç”¨å“ªä¸ªï¼Ÿâ€ ğŸ‘‰ ISR (`getStaticProps + revalidate`)ã€‚

---

### 7. `getInitialProps` ä¸ºä»€ä¹ˆä¸æ¨èï¼Ÿ

**ä¸€å¥è¯å›ç­”**
`getInitialProps` ä¼šé˜»å¡é¡µé¢æ¸²æŸ“ï¼Œä¸”æ— æ³•åˆ©ç”¨é™æ€ä¼˜åŒ–ï¼Œå› æ­¤å·²è¢«å¼ƒç”¨ã€‚

**è¦ç‚¹**

- é˜»æ­¢è‡ªåŠ¨é™æ€ä¼˜åŒ–ã€‚
- é¡µé¢æ€§èƒ½å·®ã€‚
- App Router ä¸å†æ”¯æŒã€‚

**è¯¦ç»†å›ç­”**
`getInitialProps` åœ¨ pages æ—¶ä»£å¸¸ç”¨ï¼Œä½†ç¼ºç‚¹ï¼š

- æ¯æ¬¡è¯·æ±‚éƒ½è¿è¡Œï¼Œæ— æ³•ç¼“å­˜ã€‚
- é˜»æ­¢é™æ€åŒ–ï¼Œå½±å“æ€§èƒ½ã€‚
- App Router å·²ç”¨ async Server Components å–ä»£ã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•æ—¶è‹¥è¢«é—®ï¼Œåº”å¼ºè°ƒâ€œæ¨èä½¿ç”¨ `getServerSideProps` / `getStaticProps` æˆ– App Router çš„æ•°æ®è·å–â€ã€‚

---

### 8. App Router ä¸­çš„æ•°æ®è·å–æ–¹å¼ ğŸ”¥

**ä¸€å¥è¯å›ç­”**
App Router æ¨èåœ¨ **Server Components** é‡Œç›´æ¥ç”¨ `fetch`ï¼Œå¹¶ç»“åˆç¼“å­˜ç­–ç•¥ã€‚

**è¦ç‚¹**

- `fetch` é»˜è®¤ç¼“å­˜ã€‚
- `cache: 'no-store'` å¼ºåˆ¶å®æ—¶ã€‚
- `revalidate` æ”¯æŒ ISRã€‚

**è¯¦ç»†å›ç­”**

```ts
export default async function Page() {
  const data = await fetch("https://api.example.com", {
    cache: "no-store",
  }).then((res) => res.json());
  return <div>{data.title}</div>;
}
```

App Router ä¸å†éœ€è¦ `getServerSideProps`ï¼Œç›´æ¥åœ¨ç»„ä»¶é‡Œè°ƒç”¨å³å¯ã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¯èƒ½è¿½é—®ï¼šCSR æ•°æ®è·å–æ€ä¹ˆåšï¼Ÿ ğŸ‘‰ `useEffect + fetch` æˆ– SWR/React Queryã€‚

---

### 9. ä»€ä¹ˆæ˜¯ Incremental Static Regeneration (ISR)ï¼Ÿ ğŸ”¥

**ä¸€å¥è¯å›ç­”**
ISR å…è®¸é™æ€é¡µé¢åœ¨æ„å»ºåæŒ‰éœ€ã€å®šæœŸé‡æ–°ç”Ÿæˆã€‚

**è¦ç‚¹**

- é™æ€ + åŠ¨æ€ç»“åˆã€‚
- `revalidate` è®¾ç½®æ—¶é—´ã€‚
- SEO å‹å¥½ã€‚

**è¯¦ç»†å›ç­”**
ISR æœºåˆ¶ï¼š

- åˆæ¬¡è¯·æ±‚è¿”å›æ—§é™æ€é¡µé¢ã€‚
- åå°è§¦å‘å†ç”Ÿæˆã€‚
- ä¸‹æ¬¡è¯·æ±‚ä¼šæ‹¿åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚

**æ‰©å±•/å¯¹æ¯”**

- ç”µå•†/æ–°é—»ç½‘ç«™å¸¸ç”¨ ISR ä¿è¯å†…å®¹æ›´æ–°ã€‚

---

### 10. Next.js ä¸­çš„ revalidate æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

**ä¸€å¥è¯å›ç­”**
`revalidate` è®¾ç½®é¡µé¢ç¼“å­˜å¤±æ•ˆæ—¶é—´ï¼Œåˆ°æœŸåä¼šåå°ç”Ÿæˆæ–°é¡µé¢ã€‚

**è¦ç‚¹**

- `revalidate: 60` è¡¨ç¤º 60 ç§’åæ›´æ–°ã€‚
- æ—§é¡µé¢ä¾ç„¶å¯ç”¨ï¼Œæ–°é¡µé¢ç”Ÿæˆåæ›¿æ¢ã€‚

**è¯¦ç»†å›ç­”**

```ts
export async function getStaticProps() {
  return {
    props: { data },
    revalidate: 60,
  };
}
```

**æ‰©å±•/å¯¹æ¯”**

- ISR = SSG + revalidateã€‚
- App Router ä¸­å¯ç›´æ¥åœ¨ `fetch` è®¾ç½® `next: { revalidate: 60 }`ã€‚

---

# ä¸‰ã€è·¯ç”±ä¸å¯¼èˆª

### 11. åŠ¨æ€è·¯ç”±ä¸åµŒå¥—è·¯ç”± ğŸ”¥

**ä¸€å¥è¯å›ç­”**
Next.js åŠ¨æ€è·¯ç”±é€šè¿‡ `[param]`ï¼ŒåµŒå¥—è·¯ç”±é€šè¿‡æ–‡ä»¶å¤¹å±‚çº§å®ç°ã€‚

**è¦ç‚¹**

- pagesï¼š`pages/[id].tsx`ã€‚
- app routerï¼š`app/blog/[slug]/page.tsx`ã€‚

**è¯¦ç»†å›ç­”**

- åŠ¨æ€è·¯ç”±ï¼š`/blog/[id]` â†’ `/blog/1`ã€‚
- åµŒå¥—è·¯ç”±ï¼šç›®å½•ç»“æ„å†³å®šå±‚çº§ï¼Œè‡ªåŠ¨ç”Ÿæˆè·¯å¾„ã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¸¸é—®ï¼šâ€œå¦‚ä½•ç”Ÿæˆæ‰€æœ‰åŠ¨æ€è·¯ç”±ï¼Ÿâ€ ğŸ‘‰ `getStaticPaths`ã€‚

---

### 12. `useRouter` Hook ä¸å¯¼èˆª

**ä¸€å¥è¯å›ç­”**
`useRouter` æä¾›è·¯ç”±å¯¹è±¡ï¼Œæ”¯æŒç¼–ç¨‹å¼å¯¼èˆªå’Œå‚æ•°è·å–ã€‚

**è¦ç‚¹**

- `router.push` / `router.replace`ã€‚
- `router.query` è·å–å‚æ•°ã€‚

**è¯¦ç»†å›ç­”**

```ts
import { useRouter } from "next/router";
const router = useRouter();
router.push("/home");
```

**æ‰©å±•/å¯¹æ¯”**

- App Router æ›¿æ¢ä¸º `usePathname` / `useSearchParams`ã€‚

---

### 13. App Router çš„ `usePathname`ã€`useSearchParams`

**ä¸€å¥è¯å›ç­”**
åœ¨ App Router ä¸­ï¼Œ`usePathname` è·å–è·¯å¾„ï¼Œ`useSearchParams` è·å– query å‚æ•°ã€‚

**è¦ç‚¹**

- `usePathname`: è¿”å›å½“å‰è·¯å¾„ã€‚
- `useSearchParams`: ç±»ä¼¼ `URLSearchParams`ã€‚

**è¯¦ç»†å›ç­”**

```ts
const pathname = usePathname();
const searchParams = useSearchParams();
const id = searchParams.get("id");
```

**æ‰©å±•/å¯¹æ¯”**

- æ›¿ä»£äº† `useRouter().query`ã€‚

---

### 14. Middleware çš„ä½œç”¨ä¸åº”ç”¨åœºæ™¯ ğŸ”¥

**ä¸€å¥è¯å›ç­”**
Middleware åœ¨è¯·æ±‚åˆ°è¾¾é¡µé¢å‰è¿è¡Œï¼Œå¯ç”¨äºé‰´æƒã€é‡å®šå‘ã€æ—¥å¿—ã€‚

**è¦ç‚¹**

- åŸºäº Edge Runtimeã€‚
- ä¿®æ”¹ request/responseã€‚
- å…¸å‹åº”ç”¨ï¼šç™»å½•æ ¡éªŒã€‚

**è¯¦ç»†å›ç­”**

```ts
export function middleware(req) {
  if (!req.cookies.get("token")) {
    return NextResponse.redirect(new URL("/login", req.url));
  }
}
```

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¸¸é—®ï¼šâ€œMiddleware å’Œ API Route åŒºåˆ«ï¼Ÿâ€ ğŸ‘‰ Middleware åœ¨è¾¹ç¼˜æ‹¦æˆªï¼Œè¯·æ±‚æœªåˆ°æœåŠ¡ç«¯é€»è¾‘ã€‚

---

### 15. è·¯ç”±è·³è½¬æ–¹å¼å¯¹æ¯”

**ä¸€å¥è¯å›ç­”**
Next.js æ”¯æŒ Link ç»„ä»¶ã€ç¼–ç¨‹å¼å¯¼èˆªï¼ˆuseRouterï¼‰ã€ä»¥åŠæœåŠ¡ç«¯é‡å®šå‘ã€‚

**è¦ç‚¹**

- `<Link>`ï¼šæ¨èï¼Œé¢„å–ä¼˜åŒ–ã€‚
- `router.push`ï¼šç¼–ç¨‹å¼ã€‚
- `redirect`ï¼šæœåŠ¡ç«¯ã€‚

**è¯¦ç»†å›ç­”**

- `<Link>` å†…ç½® prefetchï¼Œæ€§èƒ½æœ€ä½³ã€‚
- `router.push` é€‚åˆäº‹ä»¶å›è°ƒè·³è½¬ã€‚
- `redirect` å¸¸ç”¨äºé‰´æƒã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¯èƒ½è¿½é—®ï¼šâ€œCSR ä¸ SSR çš„è·³è½¬æ–¹å¼æœ‰ä½•ä¸åŒï¼Ÿâ€ ğŸ‘‰ CSR ç”¨ Linkï¼ŒSSR ç”¨ redirectã€‚

---

# å››ã€æ ·å¼ä¸èµ„æº

### 16. Next.js æ”¯æŒçš„æ ·å¼æ–¹å¼ ğŸ”¥

**ä¸€å¥è¯å›ç­”**
Next.js æ”¯æŒ CSS Modulesã€å…¨å±€ CSSã€CSS-in-JSã€Tailwind ç­‰ã€‚

**è¦ç‚¹**

- CSS Modulesï¼šå±€éƒ¨ä½œç”¨åŸŸã€‚
- å…¨å±€ CSSï¼š`globals.css`ã€‚
- CSS-in-JSï¼šstyled-components / emotionã€‚
- Tailwindï¼šåŸå­åŒ– CSSã€‚

**è¯¦ç»†å›ç­”**

- CSS Modules é»˜è®¤æ”¯æŒï¼Œé¿å…å‘½åå†²çªã€‚
- Tailwind å¸¸ç”¨åœ¨ä¸­å¤§å‹é¡¹ç›®ã€‚
- CSS-in-JS éœ€é…ç½® babel æ’ä»¶ã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¸¸é—®ï¼šâ€œä½ ä»¬å›¢é˜Ÿç”¨ä»€ä¹ˆæ ·å¼æ–¹æ¡ˆï¼Ÿâ€ ğŸ‘‰ æ ¹æ®ç»éªŒå›ç­”ã€‚

---

### 17. `next/image` ä¸ `next/font` çš„ä½œç”¨ ğŸ”¥

**ä¸€å¥è¯å›ç­”**
`next/image` æä¾›å›¾ç‰‡ä¼˜åŒ–ï¼Œ`next/font` æä¾›å­—ä½“ä¼˜åŒ–ã€‚

**è¦ç‚¹**

- imageï¼šæ‡’åŠ è½½ã€å“åº”å¼ã€è‡ªåŠ¨å‹ç¼©ã€‚
- fontï¼šGoogle Fonts æœ¬åœ°åŒ–ã€å¯å˜å­—ä½“ã€‚

**è¯¦ç»†å›ç­”**

```tsx
import Image from "next/image";
<Image src="/logo.png" width={200} height={200} alt="logo" />;
```

- `next/font` æ”¯æŒæœ¬åœ°å’Œåœ¨çº¿å­—ä½“ï¼Œé¿å…é—ªçƒã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¸¸é—®ï¼šâ€œnext/image æ¯” <img> å¥½åœ¨å“ªï¼Ÿâ€ ğŸ‘‰ æ‡’åŠ è½½+ä¼˜åŒ–+CDNã€‚

---

### 18. é™æ€èµ„æºçš„å­˜æ”¾ä¸å¼•ç”¨

**ä¸€å¥è¯å›ç­”**
Next.js é™æ€èµ„æºæ”¾åœ¨ `public/` ç›®å½•ï¼Œé€šè¿‡æ ¹è·¯å¾„è®¿é—®ã€‚

**è¦ç‚¹**

- `public/logo.png` â†’ `/logo.png`ã€‚
- ä¸éœ€è¦ importã€‚

**è¯¦ç»†å›ç­”**

- é€‚åˆå­˜æ”¾ faviconã€robots.txtã€å›¾ç‰‡èµ„æºã€‚

**æ‰©å±•/å¯¹æ¯”**

- å¦‚æœæ˜¯åŠ¨æ€å›¾ç‰‡ï¼Œæ¨èç”¨ `next/image`ã€‚

---

# äº”ã€API ä¸æœåŠ¡ç«¯èƒ½åŠ›

### 19. Next.js ä¸­çš„ API Routes

**ä¸€å¥è¯å›ç­”**
API Routes è®© Next.js åœ¨ pages ç›®å½•ä¸‹ç›´æ¥æä¾›åç«¯æ¥å£ã€‚

**è¦ç‚¹**

- `pages/api/*`ã€‚
- è¿”å› JSONã€‚
- å†…ç½® Node.js ç¯å¢ƒã€‚

**è¯¦ç»†å›ç­”**

```ts
export default function handler(req, res) {
  res.status(200).json({ msg: "Hello API" });
}
```

é€‚åˆå°å‹åç«¯æ¥å£ã€BFF æ¨¡å¼ã€‚

**æ‰©å±•/å¯¹æ¯”**

- ç”Ÿäº§ç¯å¢ƒå¤æ‚æ¥å£ä¸€èˆ¬äº¤ç»™ç‹¬ç«‹åç«¯ã€‚

---

### 20. App Router ä¸­çš„ Route Handlers ğŸ”¥

**ä¸€å¥è¯å›ç­”**
Route Handlers æ˜¯ App Router é‡Œçš„ API è·¯ç”±ï¼Œç”¨äºæ„å»ºåç«¯é€»è¾‘ã€‚

**è¦ç‚¹**

- `app/api/*/route.ts`ã€‚
- æ”¯æŒ GET/POST/PUT/DELETEã€‚
- è¿è¡Œåœ¨ Edge æˆ– Node ç¯å¢ƒã€‚

**è¯¦ç»†å›ç­”**

```ts
export async function GET(req: Request) {
  return NextResponse.json({ msg: "hello" });
}
```

**æ‰©å±•/å¯¹æ¯”**

- ç›¸æ¯” pages/apiï¼Œæ›´è´´è¿‘ Web æ ‡å‡†ï¼ˆRequest/Response APIï¼‰ã€‚

---

### 21. Middleware ä¸ Edge Functions çš„åŒºåˆ«

**ä¸€å¥è¯å›ç­”**
Middleware åœ¨è¯·æ±‚å‰è¿è¡Œæ‹¦æˆªï¼ŒEdge Functions æ˜¯è¿è¡Œåœ¨è¾¹ç¼˜çš„å®Œæ•´å‡½æ•°é€»è¾‘ã€‚

**è¦ç‚¹**

- Middlewareï¼šè½»é‡æ‹¦æˆªã€‚
- Edge Functionï¼šå®Œæ•´ API é€»è¾‘ã€‚
- éƒ½è¿è¡Œåœ¨ Edge Runtimeã€‚

**è¯¦ç»†å›ç­”**

- Middleware é€‚åˆé‰´æƒã€é‡å®šå‘ã€‚
- Edge Function é€‚åˆ CDN è¾¹ç¼˜è®¡ç®—ï¼Œå»¶è¿Ÿæ›´ä½ã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¸¸é—®ï¼šâ€œMiddleware èƒ½ä¸èƒ½æ›¿ä»£ API Routesï¼Ÿâ€ ğŸ‘‰ ä¸è¡Œï¼Œåªé€‚åˆæ‹¦æˆªå¤„ç†ã€‚

---

### 22. Next.js ä¸­çš„é‰´æƒå®ç° ğŸ”¥

**ä¸€å¥è¯å›ç­”**
å¸¸è§æ–¹å¼ï¼šJWTã€æœ¬åœ° sessionã€NextAuth.jsï¼Œç»“åˆ Middleware åšè·¯ç”±ä¿æŠ¤ã€‚

**è¦ç‚¹**

- Middleware æ ¡éªŒ cookie/tokenã€‚
- NextAuth.js æ’ä»¶ã€‚
- JWT å­˜å‚¨åœ¨ HttpOnly cookieã€‚

**è¯¦ç»†å›ç­”**

```ts
export function middleware(req: NextRequest) {
  const token = req.cookies.get("token");
  if (!token) return NextResponse.redirect(new URL("/login", req.url));
}
```

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¯èƒ½é—®ï¼šâ€œä¸ºä»€ä¹ˆä¸ç”¨ localStorage å­˜ tokenï¼Ÿâ€ ğŸ‘‰ HttpOnly cookie æ›´å®‰å…¨ã€‚

---

# å…­ã€æ€§èƒ½ä¸ä¼˜åŒ–

### 23. Next.js å†…ç½®æ€§èƒ½ä¼˜åŒ– ğŸ”¥

**ä¸€å¥è¯å›ç­”**
Next.js è‡ªåŠ¨åšä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ã€å›¾ç‰‡/å­—ä½“ä¼˜åŒ–ã€è·¯ç”±é¢„å–ã€‚

**è¦ç‚¹**

- è‡ªåŠ¨ä»£ç åˆ†å‰²ã€‚
- å›¾ç‰‡ä¼˜åŒ–ã€‚
- `Link` é¢„å–ã€‚

**è¯¦ç»†å›ç­”**

- æ¯ä¸ªé¡µé¢æ‰“åŒ…å•ç‹¬ chunkã€‚
- Link é»˜è®¤é¢„å–ä¸‹ä¸€é¡µã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¸¸é—®ï¼šâ€œNext.js ä¸ºä»€ä¹ˆæ¯” CRA æ€§èƒ½å¥½ï¼Ÿâ€ ğŸ‘‰ å†…ç½®ä¼˜åŒ–ã€‚

---

### 24. å¦‚ä½•æå‡ Next.js çš„é¦–å±æ€§èƒ½ï¼Ÿ ğŸ”¥

**ä¸€å¥è¯å›ç­”**
é€šè¿‡å‡å°‘é˜»å¡èµ„æºã€Critical CSSã€æ‡’åŠ è½½ã€ISR æå‡é¦–å±æ€§èƒ½ã€‚

**è¦ç‚¹**

- å›¾ç‰‡æ‡’åŠ è½½ã€‚
- ä»£ç åˆ†å‰²ã€‚
- Critical CSS å†…è”ã€‚
- ISR ç¼“å­˜ã€‚

**è¯¦ç»†å›ç­”**

- ä¼˜åŒ– SSRï¼šå‡å°‘ API è¯·æ±‚é“¾è·¯ã€‚
- ä¼˜åŒ– CSRï¼šæ‡’åŠ è½½ç»„ä»¶ã€‚

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¯èƒ½é—®ï¼šâ€œå¦‚ä½•è¡¡é‡ä¼˜åŒ–æ•ˆæœï¼Ÿâ€ ğŸ‘‰ Lighthouseã€Web Vitalsã€‚

---

### 25. Next.js ä¸­çš„ SEO ä¼˜åŒ– ğŸ”¥

**ä¸€å¥è¯å›ç­”**
é€šè¿‡ SSR/SSGã€`generateMetadata`ã€`next/head`ã€sitemap æå‡ SEOã€‚

**è¦ç‚¹**

- SSR/SSGï¼šå¯è§ HTMLã€‚
- generateMetadataï¼šApp Router æ¨èã€‚
- sitemap.xmlã€robots.txtã€‚

**è¯¦ç»†å›ç­”**

```ts
export async function generateMetadata() {
  return { title: "My Page", description: "SEO text" };
}
```

**æ‰©å±•/å¯¹æ¯”**

- é¢è¯•å®˜å¸¸é—®ï¼šâ€œNext.js å¦‚ä½•æ¯”çº¯ React SEO å¥½ï¼Ÿâ€ ğŸ‘‰ SSR/SSG + Metadataã€‚a
